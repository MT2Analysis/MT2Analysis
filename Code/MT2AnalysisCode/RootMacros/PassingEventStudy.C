{//run via root -l -b PassingEventStudy.C
//I strongly recommend not to use this code but the version 2 (PassingEventStudy2.C) as this code is extremely slow - actually should be deleted
//This code plots the tobtec filter efficiency - passed events / all events
//for various variables

//no comments as not recommended

TChain *c = new TChain("MassTree");
c->Add("~mangano/filterTOBTEC/codeHJ/CMSSW_5_3_11/myTest/MT2Code/output/bloc1/*.root");
c->Add("~mangano/filterTOBTEC/codeHJ/CMSSW_5_3_11/myTest/MT2Code/output/bloc2/*.root");

TH1D *MT2all = new TH1D("MT2all","",17,150,1000);
TH1D *MT2allHT = new TH1D("MT2allHT","",17,150,1000);
TH1D *MT2allMET = new TH1D("MT2allMET","",16,200,1000);
TH1D *MT2pass = new TH1D("MT2pass","",17,150,1000);
TH1D *MT2passHT = new TH1D("MT2passHT","",17,150,1000);
TH1D *MT2passMET = new TH1D("MT2passMET","",16,200,1000);
gROOT->SetStyle("Plain");
gStyle->SetPalette(1);
gStyle->SetOptStat(0);
gROOT->cd();
c->Draw("misc.MT2>>MT2all","((misc.MT2>200&&misc.HT>=450&&misc.HT<750&&misc.MET>200&&((trigger.HLT_PFMET150_v2==1||trigger.HLT_PFMET150_v3==1||trigger.HLT_PFMET150_v4==1||trigger.HLT_PFMET150_v5==1||trigger.HLT_PFMET150_v6==1||trigger.HLT_PFMET150_v7==1)||(trigger.HLT_PFHT350_PFMET100_v3==1||trigger.HLT_PFHT350_PFMET100_v4==1||trigger.HLT_PFHT350_PFMET100_v5==1||trigger.HLT_PFHT350_PFMET100_v6==1||trigger.HLT_PFHT350_PFMET100_v7==1||trigger.HLT_PFNoPUHT350_PFMET100_v1==1||trigger.HLT_PFNoPUHT350_PFMET100_v3==1||trigger.HLT_PFNoPUHT350_PFMET100_v4==1)))||(misc.MT2>150&misc.HT>=750&&misc.MET>30&&(trigger.HLT_PFHT650_v5==1||trigger.HLT_PFHT650_v6==1||trigger.HLT_PFHT650_v7==1||trigger.HLT_PFHT650_v8==1||trigger.HLT_PFHT650_v9==1||trigger.HLT_PFNoPUHT650_v1==1||trigger.HLT_PFNoPUHT650_v3==1||trigger.HLT_PFNoPUHT650_v4==1)))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0","goff");
c->Draw("misc.MT2>>MT2pass","((misc.MT2>200&&misc.HT>=450&&misc.HT<750&&misc.MET>200&&((trigger.HLT_PFMET150_v2==1||trigger.HLT_PFMET150_v3==1||trigger.HLT_PFMET150_v4==1||trigger.HLT_PFMET150_v5==1||trigger.HLT_PFMET150_v6==1||trigger.HLT_PFMET150_v7==1)||(trigger.HLT_PFHT350_PFMET100_v3==1||trigger.HLT_PFHT350_PFMET100_v4==1||trigger.HLT_PFHT350_PFMET100_v5==1||trigger.HLT_PFHT350_PFMET100_v6==1||trigger.HLT_PFHT350_PFMET100_v7==1||trigger.HLT_PFNoPUHT350_PFMET100_v1==1||trigger.HLT_PFNoPUHT350_PFMET100_v3==1||trigger.HLT_PFNoPUHT350_PFMET100_v4==1)))||(misc.MT2>150&misc.HT>=750&&misc.MET>30&&(trigger.HLT_PFHT650_v5==1||trigger.HLT_PFHT650_v6==1||trigger.HLT_PFHT650_v7==1||trigger.HLT_PFHT650_v8==1||trigger.HLT_PFHT650_v9==1||trigger.HLT_PFNoPUHT650_v1==1||trigger.HLT_PFNoPUHT650_v3==1||trigger.HLT_PFNoPUHT650_v4==1)))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0&&TOBTECTagger<=8","goff");
c->Draw("misc.MT2>>MT2allHT","((misc.MT2>150&&misc.HT>=750&&misc.MET>30&&(trigger.HLT_PFHT650_v5==1||trigger.HLT_PFHT650_v6==1||trigger.HLT_PFHT650_v7==1||trigger.HLT_PFHT650_v8==1||trigger.HLT_PFHT650_v9==1||trigger.HLT_PFNoPUHT650_v1==1||trigger.HLT_PFNoPUHT650_v3==1||trigger.HLT_PFNoPUHT650_v4==1)))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0","goff");
c->Draw("misc.MT2>>MT2passHT","((misc.MT2>150&&misc.HT>=750&&misc.MET>30&&(trigger.HLT_PFHT650_v5==1||trigger.HLT_PFHT650_v6==1||trigger.HLT_PFHT650_v7==1||trigger.HLT_PFHT650_v8==1||trigger.HLT_PFHT650_v9==1||trigger.HLT_PFNoPUHT650_v1==1||trigger.HLT_PFNoPUHT650_v3==1||trigger.HLT_PFNoPUHT650_v4==1)))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0&&TOBTECTagger<=8","goff");
c->Draw("misc.MT2>>MT2allMET","((misc.MT2>200&&misc.HT>=450&&misc.HT<750&&misc.MET>200&&((trigger.HLT_PFMET150_v2==1||trigger.HLT_PFMET150_v3==1||trigger.HLT_PFMET150_v4==1||trigger.HLT_PFMET150_v5==1||trigger.HLT_PFMET150_v6==1||trigger.HLT_PFMET150_v7==1)||(trigger.HLT_PFHT350_PFMET100_v3==1||trigger.HLT_PFHT350_PFMET100_v4==1||trigger.HLT_PFHT350_PFMET100_v5==1||trigger.HLT_PFHT350_PFMET100_v6==1||trigger.HLT_PFHT350_PFMET100_v7==1||trigger.HLT_PFNoPUHT350_PFMET100_v1==1||trigger.HLT_PFNoPUHT350_PFMET100_v3==1||trigger.HLT_PFNoPUHT350_PFMET100_v4==1))))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0","goff");
c->Draw("misc.MT2>>MT2passMET","((misc.MT2>200&&misc.HT>=450&&misc.HT<750&&misc.MET>200&&((trigger.HLT_PFMET150_v2==1||trigger.HLT_PFMET150_v3==1||trigger.HLT_PFMET150_v4==1||trigger.HLT_PFMET150_v5==1||trigger.HLT_PFMET150_v6==1||trigger.HLT_PFMET150_v7==1)||(trigger.HLT_PFHT350_PFMET100_v3==1||trigger.HLT_PFHT350_PFMET100_v4==1||trigger.HLT_PFHT350_PFMET100_v5==1||trigger.HLT_PFHT350_PFMET100_v6==1||trigger.HLT_PFHT350_PFMET100_v7==1||trigger.HLT_PFNoPUHT350_PFMET100_v1==1||trigger.HLT_PFNoPUHT350_PFMET100_v3==1||trigger.HLT_PFNoPUHT350_PFMET100_v4==1))))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0&&TOBTECTagger<=8","goff");
MT2all->GetXaxis()->SetTitle("M_{T2} [GeV]"); MT2all->GetYaxis()->SetTitle("all events / 50 GeV");
MT2allHT->GetXaxis()->SetTitle("M_{T2} [GeV]"); MT2allHT->GetYaxis()->SetTitle("all events / 50 GeV");
MT2allMET->GetXaxis()->SetTitle("M_{T2} [GeV]"); MT2allMET->GetYaxis()->SetTitle("all events / 50 GeV");
MT2pass->GetXaxis()->SetTitle("M_{T2} [GeV]"); MT2pass->GetYaxis()->SetTitle("passing events / 50 GeV");
MT2passHT->GetXaxis()->SetTitle("M_{T2} [GeV]"); MT2passHT->GetYaxis()->SetTitle("passing events / 50 GeV");
MT2passMET->GetXaxis()->SetTitle("M_{T2} [GeV]"); MT2passMET->GetYaxis()->SetTitle("passing events / 50 GeV");
TH1D *MT2alleff = (TH1D*)MT2all->Clone("MT2alleff");
TH1D *MT2passeff = (TH1D*)MT2pass->Clone("MT2passeff");
TH1D *MT2allHTeff = (TH1D*)MT2allHT->Clone("MT2allHTeff");
TH1D *MT2passHTeff = (TH1D*)MT2passHT->Clone("MT2passHTeff");
TH1D *MT2allMETeff = (TH1D*)MT2allMET->Clone("MT2allMETeff");
TH1D *MT2passMETeff = (TH1D*)MT2passMET->Clone("MT2passMETeff");
TEfficiency *MT2eff = new TEfficiency((*MT2passeff),(*MT2alleff));
MT2eff->SetName("MT2eff");
TEfficiency *MT2effHT = new TEfficiency((*MT2passHTeff),(*MT2allHTeff));
MT2effHT->SetName("MT2effHT");
TEfficiency *MT2effMET = new TEfficiency((*MT2passMETeff),(*MT2allMETeff));
MT2effMET->SetName("MT2effMET");
//eff->GetXaxis()->SetTitle("M_{T2} [GeV]"); eff->GetYaxis()->SetTitle("#varepsilon_{pass}");
//effHT->GetXaxis()->SetTitle("M_{T2} [GeV]"); effHT->GetYaxis()->SetTitle("#varepsilon_{pass}");
//effMET->GetXaxis()->SetTitle("M_{T2} [GeV]"); effMET->GetYaxis()->SetTitle("#varepsilon_{pass}");
TF1 *MT2fit = new TF1("MT2fit","[0]",150,1000);
TF1 *MT2fitHT = new TF1("MT2fitHT","[0]",150,1000);
TF1 *MT2fitMET = new TF1("MT2fitMET","[0]",200,1000);
MT2eff->Fit(MT2fit,"R");
MT2effHT->Fit(MT2fitHT,"R");
MT2effMET->Fit(MT2fitMET,"R");
cout << "Filled efficiency vs. MT2" << endl;

TH1D *HTall = new TH1D("HTall","",16,450,2050);
TH1D *HTallHT = new TH1D("HTallHT","", 13,750,2050);
TH1D *HTallMET = new TH1D("HTallMET","",6,450,750);
TH1D *HTpass = new TH1D("HTpass","", 16,450,2050);
TH1D *HTpassHT = new TH1D("HTpassHT","", 13,750,2050);
TH1D *HTpassMET = new TH1D("HTpassMET","",6,450,750);
gROOT->SetStyle("Plain");
gStyle->SetPalette(1);
gStyle->SetOptStat(0);
gROOT->cd();
c->Draw("misc.HT>>HTall","((misc.MT2>200&&misc.HT>=450&&misc.HT<750&&misc.MET>200&&((trigger.HLT_PFMET150_v2==1||trigger.HLT_PFMET150_v3==1||trigger.HLT_PFMET150_v4==1||trigger.HLT_PFMET150_v5==1||trigger.HLT_PFMET150_v6==1||trigger.HLT_PFMET150_v7==1)||(trigger.HLT_PFHT350_PFMET100_v3==1||trigger.HLT_PFHT350_PFMET100_v4==1||trigger.HLT_PFHT350_PFMET100_v5==1||trigger.HLT_PFHT350_PFMET100_v6==1||trigger.HLT_PFHT350_PFMET100_v7==1||trigger.HLT_PFNoPUHT350_PFMET100_v1==1||trigger.HLT_PFNoPUHT350_PFMET100_v3==1||trigger.HLT_PFNoPUHT350_PFMET100_v4==1)))||(misc.MT2>150&misc.HT>=750&&misc.MET>30&&(trigger.HLT_PFHT650_v5==1||trigger.HLT_PFHT650_v6==1||trigger.HLT_PFHT650_v7==1||trigger.HLT_PFHT650_v8==1||trigger.HLT_PFHT650_v9==1||trigger.HLT_PFNoPUHT650_v1==1||trigger.HLT_PFNoPUHT650_v3==1||trigger.HLT_PFNoPUHT650_v4==1)))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0","goff");
c->Draw("misc.HT>>HTpass","((misc.MT2>200&&misc.HT>=450&&misc.HT<750&&misc.MET>200&&((trigger.HLT_PFMET150_v2==1||trigger.HLT_PFMET150_v3==1||trigger.HLT_PFMET150_v4==1||trigger.HLT_PFMET150_v5==1||trigger.HLT_PFMET150_v6==1||trigger.HLT_PFMET150_v7==1)||(trigger.HLT_PFHT350_PFMET100_v3==1||trigger.HLT_PFHT350_PFMET100_v4==1||trigger.HLT_PFHT350_PFMET100_v5==1||trigger.HLT_PFHT350_PFMET100_v6==1||trigger.HLT_PFHT350_PFMET100_v7==1||trigger.HLT_PFNoPUHT350_PFMET100_v1==1||trigger.HLT_PFNoPUHT350_PFMET100_v3==1||trigger.HLT_PFNoPUHT350_PFMET100_v4==1)))||(misc.MT2>150&misc.HT>=750&&misc.MET>30&&(trigger.HLT_PFHT650_v5==1||trigger.HLT_PFHT650_v6==1||trigger.HLT_PFHT650_v7==1||trigger.HLT_PFHT650_v8==1||trigger.HLT_PFHT650_v9==1||trigger.HLT_PFNoPUHT650_v1==1||trigger.HLT_PFNoPUHT650_v3==1||trigger.HLT_PFNoPUHT650_v4==1)))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0&&TOBTECTagger<=8","goff");
c->Draw("misc.HT>>HTallHT","((misc.MT2>150&&misc.HT>=750&&misc.MET>30&&(trigger.HLT_PFHT650_v5==1||trigger.HLT_PFHT650_v6==1||trigger.HLT_PFHT650_v7==1||trigger.HLT_PFHT650_v8==1||trigger.HLT_PFHT650_v9==1||trigger.HLT_PFNoPUHT650_v1==1||trigger.HLT_PFNoPUHT650_v3==1||trigger.HLT_PFNoPUHT650_v4==1)))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0","goff");
c->Draw("misc.HT>>HTpassHT","((misc.MT2>150&&misc.HT>=750&&misc.MET>30&&(trigger.HLT_PFHT650_v5==1||trigger.HLT_PFHT650_v6==1||trigger.HLT_PFHT650_v7==1||trigger.HLT_PFHT650_v8==1||trigger.HLT_PFHT650_v9==1||trigger.HLT_PFNoPUHT650_v1==1||trigger.HLT_PFNoPUHT650_v3==1||trigger.HLT_PFNoPUHT650_v4==1)))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0&&TOBTECTagger<=8","goff");
c->Draw("misc.HT>>HTallMET","((misc.MT2>200&&misc.HT>=450&&misc.HT<750&&misc.MET>200&&((trigger.HLT_PFMET150_v2==1||trigger.HLT_PFMET150_v3==1||trigger.HLT_PFMET150_v4==1||trigger.HLT_PFMET150_v5==1||trigger.HLT_PFMET150_v6==1||trigger.HLT_PFMET150_v7==1)||(trigger.HLT_PFHT350_PFMET100_v3==1||trigger.HLT_PFHT350_PFMET100_v4==1||trigger.HLT_PFHT350_PFMET100_v5==1||trigger.HLT_PFHT350_PFMET100_v6==1||trigger.HLT_PFHT350_PFMET100_v7==1||trigger.HLT_PFNoPUHT350_PFMET100_v1==1||trigger.HLT_PFNoPUHT350_PFMET100_v3==1||trigger.HLT_PFNoPUHT350_PFMET100_v4==1))))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0","goff");
c->Draw("misc.HT>>HTpassMET","((misc.MT2>200&&misc.HT>=450&&misc.HT<750&&misc.MET>200&&((trigger.HLT_PFMET150_v2==1||trigger.HLT_PFMET150_v3==1||trigger.HLT_PFMET150_v4==1||trigger.HLT_PFMET150_v5==1||trigger.HLT_PFMET150_v6==1||trigger.HLT_PFMET150_v7==1)||(trigger.HLT_PFHT350_PFMET100_v3==1||trigger.HLT_PFHT350_PFMET100_v4==1||trigger.HLT_PFHT350_PFMET100_v5==1||trigger.HLT_PFHT350_PFMET100_v6==1||trigger.HLT_PFHT350_PFMET100_v7==1||trigger.HLT_PFNoPUHT350_PFMET100_v1==1||trigger.HLT_PFNoPUHT350_PFMET100_v3==1||trigger.HLT_PFNoPUHT350_PFMET100_v4==1))))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0&&TOBTECTagger<=8","goff");
HTall->GetXaxis()->SetTitle("H_{T} [GeV]"); HTall->GetYaxis()->SetTitle("all events / 100 GeV");
HTallHT->GetXaxis()->SetTitle("H_{T} [GeV]"); HTallHT->GetYaxis()->SetTitle("all events / 100 GeV");
HTallMET->GetXaxis()->SetTitle("H_{T} [GeV]"); HTallMET->GetYaxis()->SetTitle("all events / 50 GeV");
HTpass->GetXaxis()->SetTitle("H_{T} [GeV]"); HTpass->GetYaxis()->SetTitle("passing events / 100 GeV");
HTpassHT->GetXaxis()->SetTitle("H_{T} [GeV]"); HTpassHT->GetYaxis()->SetTitle("passing events / 100 GeV");
HTpassMET->GetXaxis()->SetTitle("H_{T} [GeV]"); HTpassMET->GetYaxis()->SetTitle("passing events / 50 GeV");
TH1D *HTalleff = (TH1D*)HTall->Clone("HTalleff");
TH1D *HTpasseff = (TH1D*)HTpass->Clone("HTpasseff");
TH1D *HTallHTeff = (TH1D*)HTallHT->Clone("HTallHTeff");
TH1D *HTpassHTeff = (TH1D*)HTpassHT->Clone("HTpassHTeff");
TH1D *HTallMETeff = (TH1D*)HTallMET->Clone("HTallMETeff");
TH1D *HTpassMETeff = (TH1D*)HTpassMET->Clone("HTpassMETeff");
TEfficiency *HTeff = new TEfficiency((*HTpasseff),(*HTalleff));
HTeff->SetName("HTeff");
TEfficiency *HTeffHT = new TEfficiency((*HTpassHTeff),(*HTallHTeff));
HTeffHT->SetName("HTeffHT");
TEfficiency *HTeffMET = new TEfficiency((*HTpassMETeff),(*HTallMETeff));
HTeffMET->SetName("HTeffMET");
//eff->GetXaxis()->SetTitle("M_{T2} [GeV]"); eff->GetYaxis()->SetTitle("#varepsilon_{pass}");
//effHT->GetXaxis()->SetTitle("M_{T2} [GeV]"); effHT->GetYaxis()->SetTitle("#varepsilon_{pass}");
//effMET->GetXaxis()->SetTitle("M_{T2} [GeV]"); effMET->GetYaxis()->SetTitle("#varepsilon_{pass}");
TF1 *HTfit1 = new TF1("HTfit1","[0]+x*[1]",450,750);
TF1 *HTfit2 = new TF1("HTfit2","[0]",750,2050);
TF1 *HTfitHT = new TF1("HTfitHT","[0]", 750,2050);
TF1 *HTfitMET = new TF1("HTfitMET","[0]+x*[1]", 450,750);
HTeff->Fit(HTfit1,"R");
HTeff->Fit(HTfit2,"R");
HTeffHT->Fit(HTfitHT,"R");
HTeffMET->Fit(HTfitMET,"R");
cout << "Filled efficiency vs. HT" << endl;

TH1D *METall = new TH1D("METall","",17,150,1000);
TH1D *METallHT = new TH1D("METallHT","",17,150,1000);
TH1D *METallMET = new TH1D("METallMET","",16,200,1000);
TH1D *METpass = new TH1D("METpass","",17,150,1000);
TH1D *METpassHT = new TH1D("METpassHT","",17,150,1000);
TH1D *METpassMET = new TH1D("METpassMET","",16,200,1000);
gROOT->SetStyle("Plain");
gStyle->SetPalette(1);
gStyle->SetOptStat(0);
gROOT->cd();
c->Draw("misc.MET>>METall","((misc.MT2>200&&misc.HT>=450&&misc.HT<750&&misc.MET>200&&((trigger.HLT_PFMET150_v2==1||trigger.HLT_PFMET150_v3==1||trigger.HLT_PFMET150_v4==1||trigger.HLT_PFMET150_v5==1||trigger.HLT_PFMET150_v6==1||trigger.HLT_PFMET150_v7==1)||(trigger.HLT_PFHT350_PFMET100_v3==1||trigger.HLT_PFHT350_PFMET100_v4==1||trigger.HLT_PFHT350_PFMET100_v5==1||trigger.HLT_PFHT350_PFMET100_v6==1||trigger.HLT_PFHT350_PFMET100_v7==1||trigger.HLT_PFNoPUHT350_PFMET100_v1==1||trigger.HLT_PFNoPUHT350_PFMET100_v3==1||trigger.HLT_PFNoPUHT350_PFMET100_v4==1)))||(misc.MT2>150&misc.HT>=750&&misc.MET>30&&(trigger.HLT_PFHT650_v5==1||trigger.HLT_PFHT650_v6==1||trigger.HLT_PFHT650_v7==1||trigger.HLT_PFHT650_v8==1||trigger.HLT_PFHT650_v9==1||trigger.HLT_PFNoPUHT650_v1==1||trigger.HLT_PFNoPUHT650_v3==1||trigger.HLT_PFNoPUHT650_v4==1)))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0","goff");
c->Draw("misc.MET>>METpass","((misc.MT2>200&&misc.HT>=450&&misc.HT<750&&misc.MET>200&&((trigger.HLT_PFMET150_v2==1||trigger.HLT_PFMET150_v3==1||trigger.HLT_PFMET150_v4==1||trigger.HLT_PFMET150_v5==1||trigger.HLT_PFMET150_v6==1||trigger.HLT_PFMET150_v7==1)||(trigger.HLT_PFHT350_PFMET100_v3==1||trigger.HLT_PFHT350_PFMET100_v4==1||trigger.HLT_PFHT350_PFMET100_v5==1||trigger.HLT_PFHT350_PFMET100_v6==1||trigger.HLT_PFHT350_PFMET100_v7==1||trigger.HLT_PFNoPUHT350_PFMET100_v1==1||trigger.HLT_PFNoPUHT350_PFMET100_v3==1||trigger.HLT_PFNoPUHT350_PFMET100_v4==1)))||(misc.MT2>150&misc.HT>=750&&misc.MET>30&&(trigger.HLT_PFHT650_v5==1||trigger.HLT_PFHT650_v6==1||trigger.HLT_PFHT650_v7==1||trigger.HLT_PFHT650_v8==1||trigger.HLT_PFHT650_v9==1||trigger.HLT_PFNoPUHT650_v1==1||trigger.HLT_PFNoPUHT650_v3==1||trigger.HLT_PFNoPUHT650_v4==1)))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0&&TOBTECTagger<=8","goff");
c->Draw("misc.MET>>METallHT","((misc.MT2>150&&misc.HT>=750&&misc.MET>30&&(trigger.HLT_PFHT650_v5==1||trigger.HLT_PFHT650_v6==1||trigger.HLT_PFHT650_v7==1||trigger.HLT_PFHT650_v8==1||trigger.HLT_PFHT650_v9==1||trigger.HLT_PFNoPUHT650_v1==1||trigger.HLT_PFNoPUHT650_v3==1||trigger.HLT_PFNoPUHT650_v4==1)))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0","goff");
c->Draw("misc.MET>>METpassHT","((misc.MT2>150&&misc.HT>=750&&misc.MET>30&&(trigger.HLT_PFHT650_v5==1||trigger.HLT_PFHT650_v6==1||trigger.HLT_PFHT650_v7==1||trigger.HLT_PFHT650_v8==1||trigger.HLT_PFHT650_v9==1||trigger.HLT_PFNoPUHT650_v1==1||trigger.HLT_PFNoPUHT650_v3==1||trigger.HLT_PFNoPUHT650_v4==1)))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0&&TOBTECTagger<=8","goff");
c->Draw("misc.MET>>METallMET","((misc.MT2>200&&misc.HT>=450&&misc.HT<750&&misc.MET>200&&((trigger.HLT_PFMET150_v2==1||trigger.HLT_PFMET150_v3==1||trigger.HLT_PFMET150_v4==1||trigger.HLT_PFMET150_v5==1||trigger.HLT_PFMET150_v6==1||trigger.HLT_PFMET150_v7==1)||(trigger.HLT_PFHT350_PFMET100_v3==1||trigger.HLT_PFHT350_PFMET100_v4==1||trigger.HLT_PFHT350_PFMET100_v5==1||trigger.HLT_PFHT350_PFMET100_v6==1||trigger.HLT_PFHT350_PFMET100_v7==1||trigger.HLT_PFNoPUHT350_PFMET100_v1==1||trigger.HLT_PFNoPUHT350_PFMET100_v3==1||trigger.HLT_PFNoPUHT350_PFMET100_v4==1))))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0","goff");
c->Draw("misc.MET>>METpassMET","((misc.MT2>200&&misc.HT>=450&&misc.HT<750&&misc.MET>200&&((trigger.HLT_PFMET150_v2==1||trigger.HLT_PFMET150_v3==1||trigger.HLT_PFMET150_v4==1||trigger.HLT_PFMET150_v5==1||trigger.HLT_PFMET150_v6==1||trigger.HLT_PFMET150_v7==1)||(trigger.HLT_PFHT350_PFMET100_v3==1||trigger.HLT_PFHT350_PFMET100_v4==1||trigger.HLT_PFHT350_PFMET100_v5==1||trigger.HLT_PFHT350_PFMET100_v6==1||trigger.HLT_PFHT350_PFMET100_v7==1||trigger.HLT_PFNoPUHT350_PFMET100_v1==1||trigger.HLT_PFNoPUHT350_PFMET100_v3==1||trigger.HLT_PFNoPUHT350_PFMET100_v4==1))))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0&&TOBTECTagger<=8","goff");
METall->GetXaxis()->SetTitle("E_{T}^{miss} [GeV]"); METall->GetYaxis()->SetTitle("all events / 50 GeV");
METallHT->GetXaxis()->SetTitle("E_{T}^{miss} [GeV]"); METallHT->GetYaxis()->SetTitle("all events / 50 GeV");
METallMET->GetXaxis()->SetTitle("E_{T}^{miss} [GeV]"); METallMET->GetYaxis()->SetTitle("all events / 50 GeV");
METpass->GetXaxis()->SetTitle("E_{T}^{miss} [GeV]"); METpass->GetYaxis()->SetTitle("passing events / 50 GeV");
METpassHT->GetXaxis()->SetTitle("E_{T}^{miss} [GeV]"); METpassHT->GetYaxis()->SetTitle("passing events / 50 GeV");
METpassMET->GetXaxis()->SetTitle("E_{T}^{miss} [GeV]"); METpassMET->GetYaxis()->SetTitle("passing events / 50 GeV");
TH1D *METalleff = (TH1D*)METall->Clone("METalleff");
TH1D *METpasseff = (TH1D*)METpass->Clone("METpasseff");
TH1D *METallHTeff = (TH1D*)METallHT->Clone("METallHTeff");
TH1D *METpassHTeff = (TH1D*)METpassHT->Clone("METpassHTeff");
TH1D *METallMETeff = (TH1D*)METallMET->Clone("METallMETeff");
TH1D *METpassMETeff = (TH1D*)METpassMET->Clone("METpassMETeff");
TEfficiency *METeff = new TEfficiency((*METpasseff),(*METalleff));
METeff->SetName("METeff");
TEfficiency *METeffHT = new TEfficiency((*METpassHTeff),(*METallHTeff));
METeffHT->SetName("METeffHT");
TEfficiency *METeffMET = new TEfficiency((*METpassMETeff),(*METallMETeff));
METeffMET->SetName("METeffMET");
//eff->GetXaxis()->SetTitle("M_{T2} [GeV]"); eff->GetYaxis()->SetTitle("#varepsilon_{pass}");
//effHT->GetXaxis()->SetTitle("M_{T2} [GeV]"); effHT->GetYaxis()->SetTitle("#varepsilon_{pass}");
//effMET->GetXaxis()->SetTitle("M_{T2} [GeV]"); effMET->GetYaxis()->SetTitle("#varepsilon_{pass}");
TF1 *METfit = new TF1("METfit","[0]",150,1000);
TF1 *METfitHT = new TF1("METfitHT","[0]",150,1000);
TF1 *METfitMET = new TF1("METfitMET","[0]",200,1000);
METeff->Fit(METfit,"R");
METeffHT->Fit(METfitHT,"R");
METeffMET->Fit(METfitMET,"R");
cout << "Filled efficiency vs. MET" << endl;

TH1D *NJetsall = new TH1D("NJetsall","",8,2,10);
TH1D *NJetsallHT = new TH1D("NJetsallHT","", 8,2,10);
TH1D *NJetsallMET = new TH1D("NJetsallMET","", 8,2,10);
TH1D *NJetspass = new TH1D("NJetspass","", 8,2,10);
TH1D *NJetspassHT = new TH1D("NJetspassHT","", 8,2,10);
TH1D *NJetspassMET = new TH1D("NJetspassMET","", 8,2,10);
gROOT->SetStyle("Plain");
gStyle->SetPalette(1);
gStyle->SetOptStat(0);
gROOT->cd();
c->Draw("NJetsIDLoose40>>NJetsall","((misc.MT2>200&&misc.HT>=450&&misc.HT<750&&misc.MET>200&&((trigger.HLT_PFMET150_v2==1||trigger.HLT_PFMET150_v3==1||trigger.HLT_PFMET150_v4==1||trigger.HLT_PFMET150_v5==1||trigger.HLT_PFMET150_v6==1||trigger.HLT_PFMET150_v7==1)||(trigger.HLT_PFHT350_PFMET100_v3==1||trigger.HLT_PFHT350_PFMET100_v4==1||trigger.HLT_PFHT350_PFMET100_v5==1||trigger.HLT_PFHT350_PFMET100_v6==1||trigger.HLT_PFHT350_PFMET100_v7==1||trigger.HLT_PFNoPUHT350_PFMET100_v1==1||trigger.HLT_PFNoPUHT350_PFMET100_v3==1||trigger.HLT_PFNoPUHT350_PFMET100_v4==1)))||(misc.MT2>150&misc.HT>=750&&misc.MET>30&&(trigger.HLT_PFHT650_v5==1||trigger.HLT_PFHT650_v6==1||trigger.HLT_PFHT650_v7==1||trigger.HLT_PFHT650_v8==1||trigger.HLT_PFHT650_v9==1||trigger.HLT_PFNoPUHT650_v1==1||trigger.HLT_PFNoPUHT650_v3==1||trigger.HLT_PFNoPUHT650_v4==1)))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0","goff");
c->Draw("NJetsIDLoose40>>NJetspass","((misc.MT2>200&&misc.HT>=450&&misc.HT<750&&misc.MET>200&&((trigger.HLT_PFMET150_v2==1||trigger.HLT_PFMET150_v3==1||trigger.HLT_PFMET150_v4==1||trigger.HLT_PFMET150_v5==1||trigger.HLT_PFMET150_v6==1||trigger.HLT_PFMET150_v7==1)||(trigger.HLT_PFHT350_PFMET100_v3==1||trigger.HLT_PFHT350_PFMET100_v4==1||trigger.HLT_PFHT350_PFMET100_v5==1||trigger.HLT_PFHT350_PFMET100_v6==1||trigger.HLT_PFHT350_PFMET100_v7==1||trigger.HLT_PFNoPUHT350_PFMET100_v1==1||trigger.HLT_PFNoPUHT350_PFMET100_v3==1||trigger.HLT_PFNoPUHT350_PFMET100_v4==1)))||(misc.MT2>150&misc.HT>=750&&misc.MET>30&&(trigger.HLT_PFHT650_v5==1||trigger.HLT_PFHT650_v6==1||trigger.HLT_PFHT650_v7==1||trigger.HLT_PFHT650_v8==1||trigger.HLT_PFHT650_v9==1||trigger.HLT_PFNoPUHT650_v1==1||trigger.HLT_PFNoPUHT650_v3==1||trigger.HLT_PFNoPUHT650_v4==1)))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0&&TOBTECTagger<=8","goff");
c->Draw("NJetsIDLoose40>>NJetsallHT","((misc.MT2>150&&misc.HT>=750&&misc.MET>30&&(trigger.HLT_PFHT650_v5==1||trigger.HLT_PFHT650_v6==1||trigger.HLT_PFHT650_v7==1||trigger.HLT_PFHT650_v8==1||trigger.HLT_PFHT650_v9==1||trigger.HLT_PFNoPUHT650_v1==1||trigger.HLT_PFNoPUHT650_v3==1||trigger.HLT_PFNoPUHT650_v4==1)))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0","goff");
c->Draw("NJetsIDLoose40>>NJetspassHT","((misc.MT2>150&&misc.HT>=750&&misc.MET>30&&(trigger.HLT_PFHT650_v5==1||trigger.HLT_PFHT650_v6==1||trigger.HLT_PFHT650_v7==1||trigger.HLT_PFHT650_v8==1||trigger.HLT_PFHT650_v9==1||trigger.HLT_PFNoPUHT650_v1==1||trigger.HLT_PFNoPUHT650_v3==1||trigger.HLT_PFNoPUHT650_v4==1)))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0&&TOBTECTagger<=8","goff");
c->Draw("NJetsIDLoose40>>NJetsallMET","((misc.MT2>200&&misc.HT>=450&&misc.HT<750&&misc.MET>200&&((trigger.HLT_PFMET150_v2==1||trigger.HLT_PFMET150_v3==1||trigger.HLT_PFMET150_v4==1||trigger.HLT_PFMET150_v5==1||trigger.HLT_PFMET150_v6==1||trigger.HLT_PFMET150_v7==1)||(trigger.HLT_PFHT350_PFMET100_v3==1||trigger.HLT_PFHT350_PFMET100_v4==1||trigger.HLT_PFHT350_PFMET100_v5==1||trigger.HLT_PFHT350_PFMET100_v6==1||trigger.HLT_PFHT350_PFMET100_v7==1||trigger.HLT_PFNoPUHT350_PFMET100_v1==1||trigger.HLT_PFNoPUHT350_PFMET100_v3==1||trigger.HLT_PFNoPUHT350_PFMET100_v4==1))))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0","goff");
c->Draw("NJetsIDLoose40>>NJetspassMET","((misc.MT2>200&&misc.HT>=450&&misc.HT<750&&misc.MET>200&&((trigger.HLT_PFMET150_v2==1||trigger.HLT_PFMET150_v3==1||trigger.HLT_PFMET150_v4==1||trigger.HLT_PFMET150_v5==1||trigger.HLT_PFMET150_v6==1||trigger.HLT_PFMET150_v7==1)||(trigger.HLT_PFHT350_PFMET100_v3==1||trigger.HLT_PFHT350_PFMET100_v4==1||trigger.HLT_PFHT350_PFMET100_v5==1||trigger.HLT_PFHT350_PFMET100_v6==1||trigger.HLT_PFHT350_PFMET100_v7==1||trigger.HLT_PFNoPUHT350_PFMET100_v1==1||trigger.HLT_PFNoPUHT350_PFMET100_v3==1||trigger.HLT_PFNoPUHT350_PFMET100_v4==1))))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0&&TOBTECTagger<=8","goff");
NJetsall->GetXaxis()->SetTitle("NJets"); NJetsall->GetYaxis()->SetTitle("all events / 1");
NJetsallHT->GetXaxis()->SetTitle("NJets"); NJetsallHT->GetYaxis()->SetTitle("all events / 1");
NJetsallMET->GetXaxis()->SetTitle("NJets"); NJetsallMET->GetYaxis()->SetTitle("all events / 1");
NJetspass->GetXaxis()->SetTitle("NJets"); NJetspass->GetYaxis()->SetTitle("passing events / 1");
NJetspassHT->GetXaxis()->SetTitle("NJets"); NJetspassHT->GetYaxis()->SetTitle("passing events / 1");
NJetspassMET->GetXaxis()->SetTitle("NJets"); NJetspassMET->GetYaxis()->SetTitle("passing events / 1");
TH1D *NJetsalleff = (TH1D*)NJetsall->Clone("NJetsalleff");
TH1D *NJetspasseff = (TH1D*)NJetspass->Clone("NJetspasseff");
TH1D *NJetsallHTeff = (TH1D*)NJetsallHT->Clone("NJetsallHTeff");
TH1D *NJetspassHTeff = (TH1D*)NJetspassHT->Clone("NJetspassHTeff");
TH1D *NJetsallMETeff = (TH1D*)NJetsallMET->Clone("NJetsallMETeff");
TH1D *NJetspassMETeff = (TH1D*)NJetspassMET->Clone("NJetspassMETeff");
TEfficiency *NJetseff = new TEfficiency((*NJetspasseff),(*NJetsalleff));
NJetseff->SetName("NJetseff");
TEfficiency *NJetseffHT = new TEfficiency((*NJetspassHTeff),(*NJetsallHTeff));
NJetseffHT->SetName("NJetseffHT");
TEfficiency *NJetseffMET = new TEfficiency((*NJetspassMETeff),(*NJetsallMETeff));
NJetseffMET->SetName("NJetseffMET");
TF1 *NJetsfit = new TF1("NJetsfit","[0]",2,10);
TF1 *NJetsfitHT = new TF1("NJetsfitHT","[0]",2,10);
TF1 *NJetsfitMET = new TF1("NJetsfitMET","[0]",2,10);
NJetseff->Fit(NJetsfit,"R");
NJetseffHT->Fit(NJetsfitHT,"R");
NJetseffMET->Fit(NJetsfitMET,"R");
cout << "Filled efficiency vs. NJets" << endl;

TH1D *Jet1Etaall = new TH1D("Jet1Etaall","",24,-2.4,2.4);
TH1D *Jet1EtaallHT = new TH1D("Jet1EtaallHT","", 24,-2.4,2.4);
TH1D *Jet1EtaallMET = new TH1D("Jet1EtaallMET","", 24,-2.4,2.4);
TH1D *Jet1Etapass = new TH1D("Jet1Etapass","", 24,-2.4,2.4);
TH1D *Jet1EtapassHT = new TH1D("Jet1EtapassHT","", 24,-2.4,2.4);
TH1D *Jet1EtapassMET = new TH1D("Jet1EtapassMET","", 24,-2.4,2.4);
gROOT->SetStyle("Plain");
gStyle->SetPalette(1);
gStyle->SetOptStat(0);
gROOT->cd();
c->Draw("jet[0].lv.Eta()>>Jet1Etaall","((misc.MT2>200&&misc.HT>=450&&misc.HT<750&&misc.MET>200&&((trigger.HLT_PFMET150_v2==1||trigger.HLT_PFMET150_v3==1||trigger.HLT_PFMET150_v4==1||trigger.HLT_PFMET150_v5==1||trigger.HLT_PFMET150_v6==1||trigger.HLT_PFMET150_v7==1)||(trigger.HLT_PFHT350_PFMET100_v3==1||trigger.HLT_PFHT350_PFMET100_v4==1||trigger.HLT_PFHT350_PFMET100_v5==1||trigger.HLT_PFHT350_PFMET100_v6==1||trigger.HLT_PFHT350_PFMET100_v7==1||trigger.HLT_PFNoPUHT350_PFMET100_v1==1||trigger.HLT_PFNoPUHT350_PFMET100_v3==1||trigger.HLT_PFNoPUHT350_PFMET100_v4==1)))||(misc.MT2>150&misc.HT>=750&&misc.MET>30&&(trigger.HLT_PFHT650_v5==1||trigger.HLT_PFHT650_v6==1||trigger.HLT_PFHT650_v7==1||trigger.HLT_PFHT650_v8==1||trigger.HLT_PFHT650_v9==1||trigger.HLT_PFNoPUHT650_v1==1||trigger.HLT_PFNoPUHT650_v3==1||trigger.HLT_PFNoPUHT650_v4==1)))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0","goff");
c->Draw("jet[0].lv.Eta()>>Jet1Etapass","((misc.MT2>200&&misc.HT>=450&&misc.HT<750&&misc.MET>200&&((trigger.HLT_PFMET150_v2==1||trigger.HLT_PFMET150_v3==1||trigger.HLT_PFMET150_v4==1||trigger.HLT_PFMET150_v5==1||trigger.HLT_PFMET150_v6==1||trigger.HLT_PFMET150_v7==1)||(trigger.HLT_PFHT350_PFMET100_v3==1||trigger.HLT_PFHT350_PFMET100_v4==1||trigger.HLT_PFHT350_PFMET100_v5==1||trigger.HLT_PFHT350_PFMET100_v6==1||trigger.HLT_PFHT350_PFMET100_v7==1||trigger.HLT_PFNoPUHT350_PFMET100_v1==1||trigger.HLT_PFNoPUHT350_PFMET100_v3==1||trigger.HLT_PFNoPUHT350_PFMET100_v4==1)))||(misc.MT2>150&misc.HT>=750&&misc.MET>30&&(trigger.HLT_PFHT650_v5==1||trigger.HLT_PFHT650_v6==1||trigger.HLT_PFHT650_v7==1||trigger.HLT_PFHT650_v8==1||trigger.HLT_PFHT650_v9==1||trigger.HLT_PFNoPUHT650_v1==1||trigger.HLT_PFNoPUHT650_v3==1||trigger.HLT_PFNoPUHT650_v4==1)))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0&&TOBTECTagger<=8","goff");
c->Draw("jet[0].lv.Eta()>>Jet1EtaallHT","((misc.MT2>150&&misc.HT>=750&&misc.MET>30&&(trigger.HLT_PFHT650_v5==1||trigger.HLT_PFHT650_v6==1||trigger.HLT_PFHT650_v7==1||trigger.HLT_PFHT650_v8==1||trigger.HLT_PFHT650_v9==1||trigger.HLT_PFNoPUHT650_v1==1||trigger.HLT_PFNoPUHT650_v3==1||trigger.HLT_PFNoPUHT650_v4==1)))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0","goff");
c->Draw("jet[0].lv.Eta()>>Jet1EtapassHT","((misc.MT2>150&&misc.HT>=750&&misc.MET>30&&(trigger.HLT_PFHT650_v5==1||trigger.HLT_PFHT650_v6==1||trigger.HLT_PFHT650_v7==1||trigger.HLT_PFHT650_v8==1||trigger.HLT_PFHT650_v9==1||trigger.HLT_PFNoPUHT650_v1==1||trigger.HLT_PFNoPUHT650_v3==1||trigger.HLT_PFNoPUHT650_v4==1)))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0&&TOBTECTagger<=8","goff");
c->Draw("jet[0].lv.Eta()>>Jet1EtaallMET","((misc.MT2>200&&misc.HT>=450&&misc.HT<750&&misc.MET>200&&((trigger.HLT_PFMET150_v2==1||trigger.HLT_PFMET150_v3==1||trigger.HLT_PFMET150_v4==1||trigger.HLT_PFMET150_v5==1||trigger.HLT_PFMET150_v6==1||trigger.HLT_PFMET150_v7==1)||(trigger.HLT_PFHT350_PFMET100_v3==1||trigger.HLT_PFHT350_PFMET100_v4==1||trigger.HLT_PFHT350_PFMET100_v5==1||trigger.HLT_PFHT350_PFMET100_v6==1||trigger.HLT_PFHT350_PFMET100_v7==1||trigger.HLT_PFNoPUHT350_PFMET100_v1==1||trigger.HLT_PFNoPUHT350_PFMET100_v3==1||trigger.HLT_PFNoPUHT350_PFMET100_v4==1))))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0","goff");
c->Draw("jet[0].lv.Eta()>>Jet1EtapassMET","((misc.MT2>200&&misc.HT>=450&&misc.HT<750&&misc.MET>200&&((trigger.HLT_PFMET150_v2==1||trigger.HLT_PFMET150_v3==1||trigger.HLT_PFMET150_v4==1||trigger.HLT_PFMET150_v5==1||trigger.HLT_PFMET150_v6==1||trigger.HLT_PFMET150_v7==1)||(trigger.HLT_PFHT350_PFMET100_v3==1||trigger.HLT_PFHT350_PFMET100_v4==1||trigger.HLT_PFHT350_PFMET100_v5==1||trigger.HLT_PFHT350_PFMET100_v6==1||trigger.HLT_PFHT350_PFMET100_v7==1||trigger.HLT_PFNoPUHT350_PFMET100_v1==1||trigger.HLT_PFNoPUHT350_PFMET100_v3==1||trigger.HLT_PFNoPUHT350_PFMET100_v4==1))))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0&&TOBTECTagger<=8","goff");
Jet1Etaall->GetXaxis()->SetTitle("jet 1 #eta"); Jet1Etaall->GetYaxis()->SetTitle("all events / 1");
Jet1EtaallHT->GetXaxis()->SetTitle("jet 1 #eta"); Jet1EtaallHT->GetYaxis()->SetTitle("all events / 1");
Jet1EtaallMET->GetXaxis()->SetTitle("jet 1 #eta"); Jet1EtaallMET->GetYaxis()->SetTitle("all events / 1");
Jet1Etapass->GetXaxis()->SetTitle("jet 1 #eta"); Jet1Etapass->GetYaxis()->SetTitle("passing events / 1");
Jet1EtapassHT->GetXaxis()->SetTitle("jet 1 #eta"); Jet1EtapassHT->GetYaxis()->SetTitle("passing events / 1");
Jet1EtapassMET->GetXaxis()->SetTitle("jet 1 #eta"); Jet1EtapassMET->GetYaxis()->SetTitle("passing events / 1");
TH1D *Jet1Etaalleff = (TH1D*)Jet1Etaall->Clone("Jet1Etaalleff");
TH1D *Jet1Etapasseff = (TH1D*)Jet1Etapass->Clone("Jet1Etapasseff");
TH1D *Jet1EtaallHTeff = (TH1D*)Jet1EtaallHT->Clone("Jet1EtaallHTeff");
TH1D *Jet1EtapassHTeff = (TH1D*)Jet1EtapassHT->Clone("Jet1EtapassHTeff");
TH1D *Jet1EtaallMETeff = (TH1D*)Jet1EtaallMET->Clone("Jet1EtaallMETeff");
TH1D *Jet1EtapassMETeff = (TH1D*)Jet1EtapassMET->Clone("Jet1EtapassMETeff");
TEfficiency *Jet1Etaeff = new TEfficiency((*Jet1Etapasseff),(*Jet1Etaalleff));
Jet1Etaeff->SetName("Jet1Etaeff");
TEfficiency *Jet1EtaeffHT = new TEfficiency((*Jet1EtapassHTeff),(*Jet1EtaallHTeff));
Jet1EtaeffHT->SetName("Jet1EtaeffHT");
TEfficiency *Jet1EtaeffMET = new TEfficiency((*Jet1EtapassMETeff),(*Jet1EtaallMETeff));
Jet1EtaeffMET->SetName("Jet1EtaeffMET");
cout << "Filled efficiency vs. j1 eta" << endl;

TH1D *Jet2Etaall = new TH1D("Jet2Etaall","",24,-2.4,2.4);
TH1D *Jet2EtaallHT = new TH1D("Jet2EtaallHT","", 24,-2.4,2.4);
TH1D *Jet2EtaallMET = new TH1D("Jet2EtaallMET","", 24,-2.4,2.4);
TH1D *Jet2Etapass = new TH1D("Jet2Etapass","", 24,-2.4,2.4);
TH1D *Jet2EtapassHT = new TH1D("Jet2EtapassHT","", 24,-2.4,2.4);
TH1D *Jet2EtapassMET = new TH1D("Jet2EtapassMET","", 24,-2.4,2.4);
gROOT->SetStyle("Plain");
gStyle->SetPalette(1);
gStyle->SetOptStat(0);
gROOT->cd();
c->Draw("jet[1].lv.Eta()>>Jet2Etaall","((misc.MT2>200&&misc.HT>=450&&misc.HT<750&&misc.MET>200&&((trigger.HLT_PFMET150_v2==1||trigger.HLT_PFMET150_v3==1||trigger.HLT_PFMET150_v4==1||trigger.HLT_PFMET150_v5==1||trigger.HLT_PFMET150_v6==1||trigger.HLT_PFMET150_v7==1)||(trigger.HLT_PFHT350_PFMET100_v3==1||trigger.HLT_PFHT350_PFMET100_v4==1||trigger.HLT_PFHT350_PFMET100_v5==1||trigger.HLT_PFHT350_PFMET100_v6==1||trigger.HLT_PFHT350_PFMET100_v7==1||trigger.HLT_PFNoPUHT350_PFMET100_v1==1||trigger.HLT_PFNoPUHT350_PFMET100_v3==1||trigger.HLT_PFNoPUHT350_PFMET100_v4==1)))||(misc.MT2>150&misc.HT>=750&&misc.MET>30&&(trigger.HLT_PFHT650_v5==1||trigger.HLT_PFHT650_v6==1||trigger.HLT_PFHT650_v7==1||trigger.HLT_PFHT650_v8==1||trigger.HLT_PFHT650_v9==1||trigger.HLT_PFNoPUHT650_v1==1||trigger.HLT_PFNoPUHT650_v3==1||trigger.HLT_PFNoPUHT650_v4==1)))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0","goff");
c->Draw("jet[1].lv.Eta()>>Jet2Etapass","((misc.MT2>200&&misc.HT>=450&&misc.HT<750&&misc.MET>200&&((trigger.HLT_PFMET150_v2==1||trigger.HLT_PFMET150_v3==1||trigger.HLT_PFMET150_v4==1||trigger.HLT_PFMET150_v5==1||trigger.HLT_PFMET150_v6==1||trigger.HLT_PFMET150_v7==1)||(trigger.HLT_PFHT350_PFMET100_v3==1||trigger.HLT_PFHT350_PFMET100_v4==1||trigger.HLT_PFHT350_PFMET100_v5==1||trigger.HLT_PFHT350_PFMET100_v6==1||trigger.HLT_PFHT350_PFMET100_v7==1||trigger.HLT_PFNoPUHT350_PFMET100_v1==1||trigger.HLT_PFNoPUHT350_PFMET100_v3==1||trigger.HLT_PFNoPUHT350_PFMET100_v4==1)))||(misc.MT2>150&misc.HT>=750&&misc.MET>30&&(trigger.HLT_PFHT650_v5==1||trigger.HLT_PFHT650_v6==1||trigger.HLT_PFHT650_v7==1||trigger.HLT_PFHT650_v8==1||trigger.HLT_PFHT650_v9==1||trigger.HLT_PFNoPUHT650_v1==1||trigger.HLT_PFNoPUHT650_v3==1||trigger.HLT_PFNoPUHT650_v4==1)))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0&&TOBTECTagger<=8","goff");
c->Draw("jet[1].lv.Eta()>>Jet2EtaallHT","((misc.MT2>150&&misc.HT>=750&&misc.MET>30&&(trigger.HLT_PFHT650_v5==1||trigger.HLT_PFHT650_v6==1||trigger.HLT_PFHT650_v7==1||trigger.HLT_PFHT650_v8==1||trigger.HLT_PFHT650_v9==1||trigger.HLT_PFNoPUHT650_v1==1||trigger.HLT_PFNoPUHT650_v3==1||trigger.HLT_PFNoPUHT650_v4==1)))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0","goff");
c->Draw("jet[1].lv.Eta()>>Jet2EtapassHT","((misc.MT2>150&&misc.HT>=750&&misc.MET>30&&(trigger.HLT_PFHT650_v5==1||trigger.HLT_PFHT650_v6==1||trigger.HLT_PFHT650_v7==1||trigger.HLT_PFHT650_v8==1||trigger.HLT_PFHT650_v9==1||trigger.HLT_PFNoPUHT650_v1==1||trigger.HLT_PFNoPUHT650_v3==1||trigger.HLT_PFNoPUHT650_v4==1)))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0&&TOBTECTagger<=8","goff");
c->Draw("jet[1].lv.Eta()>>Jet2EtaallMET","((misc.MT2>200&&misc.HT>=450&&misc.HT<750&&misc.MET>200&&((trigger.HLT_PFMET150_v2==1||trigger.HLT_PFMET150_v3==1||trigger.HLT_PFMET150_v4==1||trigger.HLT_PFMET150_v5==1||trigger.HLT_PFMET150_v6==1||trigger.HLT_PFMET150_v7==1)||(trigger.HLT_PFHT350_PFMET100_v3==1||trigger.HLT_PFHT350_PFMET100_v4==1||trigger.HLT_PFHT350_PFMET100_v5==1||trigger.HLT_PFHT350_PFMET100_v6==1||trigger.HLT_PFHT350_PFMET100_v7==1||trigger.HLT_PFNoPUHT350_PFMET100_v1==1||trigger.HLT_PFNoPUHT350_PFMET100_v3==1||trigger.HLT_PFNoPUHT350_PFMET100_v4==1))))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0","goff");
c->Draw("jet[1].lv.Eta()>>Jet2EtapassMET","((misc.MT2>200&&misc.HT>=450&&misc.HT<750&&misc.MET>200&&((trigger.HLT_PFMET150_v2==1||trigger.HLT_PFMET150_v3==1||trigger.HLT_PFMET150_v4==1||trigger.HLT_PFMET150_v5==1||trigger.HLT_PFMET150_v6==1||trigger.HLT_PFMET150_v7==1)||(trigger.HLT_PFHT350_PFMET100_v3==1||trigger.HLT_PFHT350_PFMET100_v4==1||trigger.HLT_PFHT350_PFMET100_v5==1||trigger.HLT_PFHT350_PFMET100_v6==1||trigger.HLT_PFHT350_PFMET100_v7==1||trigger.HLT_PFNoPUHT350_PFMET100_v1==1||trigger.HLT_PFNoPUHT350_PFMET100_v3==1||trigger.HLT_PFNoPUHT350_PFMET100_v4==1))))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0&&TOBTECTagger<=8","goff");
Jet2Etaall->GetXaxis()->SetTitle("jet 2 #eta"); Jet2Etaall->GetYaxis()->SetTitle("all events / 1");
Jet2EtaallHT->GetXaxis()->SetTitle("jet 2 #eta"); Jet2EtaallHT->GetYaxis()->SetTitle("all events / 1");
Jet2EtaallMET->GetXaxis()->SetTitle("jet 2 #eta"); Jet2EtaallMET->GetYaxis()->SetTitle("all events / 1");
Jet2Etapass->GetXaxis()->SetTitle("jet 2 #eta"); Jet2Etapass->GetYaxis()->SetTitle("passing events / 1");
Jet2EtapassHT->GetXaxis()->SetTitle("jet 2 #eta"); Jet2EtapassHT->GetYaxis()->SetTitle("passing events / 1");
Jet2EtapassMET->GetXaxis()->SetTitle("jet 2 #eta"); Jet2EtapassMET->GetYaxis()->SetTitle("passing events / 1");
TH1D *Jet2Etaalleff = (TH1D*)Jet2Etaall->Clone("Jet2Etaalleff");
TH1D *Jet2Etapasseff = (TH1D*)Jet2Etapass->Clone("Jet2Etapasseff");
TH1D *Jet2EtaallHTeff = (TH1D*)Jet2EtaallHT->Clone("Jet2EtaallHTeff");
TH1D *Jet2EtapassHTeff = (TH1D*)Jet2EtapassHT->Clone("Jet2EtapassHTeff");
TH1D *Jet2EtaallMETeff = (TH1D*)Jet2EtaallMET->Clone("Jet2EtaallMETeff");
TH1D *Jet2EtapassMETeff = (TH1D*)Jet2EtapassMET->Clone("Jet2EtapassMETeff");
TEfficiency *Jet2Etaeff = new TEfficiency((*Jet2Etapasseff),(*Jet2Etaalleff));
Jet2Etaeff->SetName("Jet2Etaeff");
TEfficiency *Jet2EtaeffHT = new TEfficiency((*Jet2EtapassHTeff),(*Jet2EtaallHTeff));
Jet2EtaeffHT->SetName("Jet2EtaeffHT");
TEfficiency *Jet2EtaeffMET = new TEfficiency((*Jet2EtapassMETeff),(*Jet2EtaallMETeff));
Jet2EtaeffMET->SetName("Jet2EtaeffMET");
cout << "Filled efficiency vs. j2 eta" << endl;

TH1D *Jet3Etaall = new TH1D("Jet3Etaall","",24,-2.4,2.4);
TH1D *Jet3EtaallHT = new TH1D("Jet3EtaallHT","", 24,-2.4,2.4);
TH1D *Jet3EtaallMET = new TH1D("Jet3EtaallMET","", 24,-2.4,2.4);
TH1D *Jet3Etapass = new TH1D("Jet3Etapass","", 24,-2.4,2.4);
TH1D *Jet3EtapassHT = new TH1D("Jet3EtapassHT","", 24,-2.4,2.4);
TH1D *Jet3EtapassMET = new TH1D("Jet3EtapassMET","", 24,-2.4,2.4);
gROOT->SetStyle("Plain");
gStyle->SetPalette(1);
gStyle->SetOptStat(0);
gROOT->cd();
c->Draw("jet[2].lv.Eta()>>Jet3Etaall","NJetsIDLoose40>2&&((misc.MT2>200&&misc.HT>=450&&misc.HT<750&&misc.MET>200&&((trigger.HLT_PFMET150_v2==1||trigger.HLT_PFMET150_v3==1||trigger.HLT_PFMET150_v4==1||trigger.HLT_PFMET150_v5==1||trigger.HLT_PFMET150_v6==1||trigger.HLT_PFMET150_v7==1)||(trigger.HLT_PFHT350_PFMET100_v3==1||trigger.HLT_PFHT350_PFMET100_v4==1||trigger.HLT_PFHT350_PFMET100_v5==1||trigger.HLT_PFHT350_PFMET100_v6==1||trigger.HLT_PFHT350_PFMET100_v7==1||trigger.HLT_PFNoPUHT350_PFMET100_v1==1||trigger.HLT_PFNoPUHT350_PFMET100_v3==1||trigger.HLT_PFNoPUHT350_PFMET100_v4==1)))||(misc.MT2>150&misc.HT>=750&&misc.MET>30&&(trigger.HLT_PFHT650_v5==1||trigger.HLT_PFHT650_v6==1||trigger.HLT_PFHT650_v7==1||trigger.HLT_PFHT650_v8==1||trigger.HLT_PFHT650_v9==1||trigger.HLT_PFNoPUHT650_v1==1||trigger.HLT_PFNoPUHT650_v3==1||trigger.HLT_PFNoPUHT650_v4==1)))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0","goff");
c->Draw("jet[2].lv.Eta()>>Jet3Etapass","NJetsIDLoose40>2&&((misc.MT2>200&&misc.HT>=450&&misc.HT<750&&misc.MET>200&&((trigger.HLT_PFMET150_v2==1||trigger.HLT_PFMET150_v3==1||trigger.HLT_PFMET150_v4==1||trigger.HLT_PFMET150_v5==1||trigger.HLT_PFMET150_v6==1||trigger.HLT_PFMET150_v7==1)||(trigger.HLT_PFHT350_PFMET100_v3==1||trigger.HLT_PFHT350_PFMET100_v4==1||trigger.HLT_PFHT350_PFMET100_v5==1||trigger.HLT_PFHT350_PFMET100_v6==1||trigger.HLT_PFHT350_PFMET100_v7==1||trigger.HLT_PFNoPUHT350_PFMET100_v1==1||trigger.HLT_PFNoPUHT350_PFMET100_v3==1||trigger.HLT_PFNoPUHT350_PFMET100_v4==1)))||(misc.MT2>150&misc.HT>=750&&misc.MET>30&&(trigger.HLT_PFHT650_v5==1||trigger.HLT_PFHT650_v6==1||trigger.HLT_PFHT650_v7==1||trigger.HLT_PFHT650_v8==1||trigger.HLT_PFHT650_v9==1||trigger.HLT_PFNoPUHT650_v1==1||trigger.HLT_PFNoPUHT650_v3==1||trigger.HLT_PFNoPUHT650_v4==1)))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0&&TOBTECTagger<=8","goff");
c->Draw("jet[2].lv.Eta()>>Jet3EtaallHT","NJetsIDLoose40>2&&((misc.MT2>150&&misc.HT>=750&&misc.MET>30&&(trigger.HLT_PFHT650_v5==1||trigger.HLT_PFHT650_v6==1||trigger.HLT_PFHT650_v7==1||trigger.HLT_PFHT650_v8==1||trigger.HLT_PFHT650_v9==1||trigger.HLT_PFNoPUHT650_v1==1||trigger.HLT_PFNoPUHT650_v3==1||trigger.HLT_PFNoPUHT650_v4==1)))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0","goff");
c->Draw("jet[2].lv.Eta()>>Jet3EtapassHT","NJetsIDLoose40>2&&((misc.MT2>150&&misc.HT>=750&&misc.MET>30&&(trigger.HLT_PFHT650_v5==1||trigger.HLT_PFHT650_v6==1||trigger.HLT_PFHT650_v7==1||trigger.HLT_PFHT650_v8==1||trigger.HLT_PFHT650_v9==1||trigger.HLT_PFNoPUHT650_v1==1||trigger.HLT_PFNoPUHT650_v3==1||trigger.HLT_PFNoPUHT650_v4==1)))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0&&TOBTECTagger<=8","goff");
c->Draw("jet[2].lv.Eta()>>Jet3EtaallMET","NJetsIDLoose40>2&&((misc.MT2>200&&misc.HT>=450&&misc.HT<750&&misc.MET>200&&((trigger.HLT_PFMET150_v2==1||trigger.HLT_PFMET150_v3==1||trigger.HLT_PFMET150_v4==1||trigger.HLT_PFMET150_v5==1||trigger.HLT_PFMET150_v6==1||trigger.HLT_PFMET150_v7==1)||(trigger.HLT_PFHT350_PFMET100_v3==1||trigger.HLT_PFHT350_PFMET100_v4==1||trigger.HLT_PFHT350_PFMET100_v5==1||trigger.HLT_PFHT350_PFMET100_v6==1||trigger.HLT_PFHT350_PFMET100_v7==1||trigger.HLT_PFNoPUHT350_PFMET100_v1==1||trigger.HLT_PFNoPUHT350_PFMET100_v3==1||trigger.HLT_PFNoPUHT350_PFMET100_v4==1))))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0","goff");
c->Draw("jet[2].lv.Eta()>>Jet3EtapassMET","NJetsIDLoose40>2&&((misc.MT2>200&&misc.HT>=450&&misc.HT<750&&misc.MET>200&&((trigger.HLT_PFMET150_v2==1||trigger.HLT_PFMET150_v3==1||trigger.HLT_PFMET150_v4==1||trigger.HLT_PFMET150_v5==1||trigger.HLT_PFMET150_v6==1||trigger.HLT_PFMET150_v7==1)||(trigger.HLT_PFHT350_PFMET100_v3==1||trigger.HLT_PFHT350_PFMET100_v4==1||trigger.HLT_PFHT350_PFMET100_v5==1||trigger.HLT_PFHT350_PFMET100_v6==1||trigger.HLT_PFHT350_PFMET100_v7==1||trigger.HLT_PFNoPUHT350_PFMET100_v1==1||trigger.HLT_PFNoPUHT350_PFMET100_v3==1||trigger.HLT_PFNoPUHT350_PFMET100_v4==1))))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0&&TOBTECTagger<=8","goff");
Jet3Etaall->GetXaxis()->SetTitle("jet 3 #eta"); Jet3Etaall->GetYaxis()->SetTitle("all events / 1");
Jet3EtaallHT->GetXaxis()->SetTitle("jet 3 #eta"); Jet3EtaallHT->GetYaxis()->SetTitle("all events / 1");
Jet3EtaallMET->GetXaxis()->SetTitle("jet 3 #eta"); Jet3EtaallMET->GetYaxis()->SetTitle("all events / 1");
Jet3Etapass->GetXaxis()->SetTitle("jet 3 #eta"); Jet3Etapass->GetYaxis()->SetTitle("passing events / 1");
Jet3EtapassHT->GetXaxis()->SetTitle("jet 3 #eta"); Jet3EtapassHT->GetYaxis()->SetTitle("passing events / 1");
Jet3EtapassMET->GetXaxis()->SetTitle("jet 3 #eta"); Jet3EtapassMET->GetYaxis()->SetTitle("passing events / 1");
TH1D *Jet3Etaalleff = (TH1D*)Jet3Etaall->Clone("Jet3Etaalleff");
TH1D *Jet3Etapasseff = (TH1D*)Jet3Etapass->Clone("Jet3Etapasseff");
TH1D *Jet3EtaallHTeff = (TH1D*)Jet3EtaallHT->Clone("Jet3EtaallHTeff");
TH1D *Jet3EtapassHTeff = (TH1D*)Jet3EtapassHT->Clone("Jet3EtapassHTeff");
TH1D *Jet3EtaallMETeff = (TH1D*)Jet3EtaallMET->Clone("Jet3EtaallMETeff");
TH1D *Jet3EtapassMETeff = (TH1D*)Jet3EtapassMET->Clone("Jet3EtapassMETeff");
TEfficiency *Jet3Etaeff = new TEfficiency((*Jet3Etapasseff),(*Jet3Etaalleff));
Jet3Etaeff->SetName("Jet3Etaeff");
TEfficiency *Jet3EtaeffHT = new TEfficiency((*Jet3EtapassHTeff),(*Jet3EtaallHTeff));
Jet3EtaeffHT->SetName("Jet3EtaeffHT");
TEfficiency *Jet3EtaeffMET = new TEfficiency((*Jet3EtapassMETeff),(*Jet3EtaallMETeff));
Jet3EtaeffMET->SetName("Jet3EtaeffMET");
cout << "Filled efficiency vs. j3 eta" << endl;

TH1D *Jet4Etaall = new TH1D("Jet4Etaall","",24,-2.4,2.4);
TH1D *Jet4EtaallHT = new TH1D("Jet4EtaallHT","", 24,-2.4,2.4);
TH1D *Jet4EtaallMET = new TH1D("Jet4EtaallMET","", 24,-2.4,2.4);
TH1D *Jet4Etapass = new TH1D("Jet4Etapass","", 24,-2.4,2.4);
TH1D *Jet4EtapassHT = new TH1D("Jet4EtapassHT","", 24,-2.4,2.4);
TH1D *Jet4EtapassMET = new TH1D("Jet4EtapassMET","", 24,-2.4,2.4);
gROOT->SetStyle("Plain");
gStyle->SetPalette(1);
gStyle->SetOptStat(0);
gROOT->cd();
c->Draw("jet[3].lv.Eta()>>Jet4Etaall","NJetsIDLoose40>3&&((misc.MT2>200&&misc.HT>=450&&misc.HT<750&&misc.MET>200&&((trigger.HLT_PFMET150_v2==1||trigger.HLT_PFMET150_v3==1||trigger.HLT_PFMET150_v4==1||trigger.HLT_PFMET150_v5==1||trigger.HLT_PFMET150_v6==1||trigger.HLT_PFMET150_v7==1)||(trigger.HLT_PFHT350_PFMET100_v3==1||trigger.HLT_PFHT350_PFMET100_v4==1||trigger.HLT_PFHT350_PFMET100_v5==1||trigger.HLT_PFHT350_PFMET100_v6==1||trigger.HLT_PFHT350_PFMET100_v7==1||trigger.HLT_PFNoPUHT350_PFMET100_v1==1||trigger.HLT_PFNoPUHT350_PFMET100_v3==1||trigger.HLT_PFNoPUHT350_PFMET100_v4==1)))||(misc.MT2>150&misc.HT>=750&&misc.MET>30&&(trigger.HLT_PFHT650_v5==1||trigger.HLT_PFHT650_v6==1||trigger.HLT_PFHT650_v7==1||trigger.HLT_PFHT650_v8==1||trigger.HLT_PFHT650_v9==1||trigger.HLT_PFNoPUHT650_v1==1||trigger.HLT_PFNoPUHT650_v3==1||trigger.HLT_PFNoPUHT650_v4==1)))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0","goff");
c->Draw("jet[3].lv.Eta()>>Jet4Etapass","NJetsIDLoose40>3&&((misc.MT2>200&&misc.HT>=450&&misc.HT<750&&misc.MET>200&&((trigger.HLT_PFMET150_v2==1||trigger.HLT_PFMET150_v3==1||trigger.HLT_PFMET150_v4==1||trigger.HLT_PFMET150_v5==1||trigger.HLT_PFMET150_v6==1||trigger.HLT_PFMET150_v7==1)||(trigger.HLT_PFHT350_PFMET100_v3==1||trigger.HLT_PFHT350_PFMET100_v4==1||trigger.HLT_PFHT350_PFMET100_v5==1||trigger.HLT_PFHT350_PFMET100_v6==1||trigger.HLT_PFHT350_PFMET100_v7==1||trigger.HLT_PFNoPUHT350_PFMET100_v1==1||trigger.HLT_PFNoPUHT350_PFMET100_v3==1||trigger.HLT_PFNoPUHT350_PFMET100_v4==1)))||(misc.MT2>150&misc.HT>=750&&misc.MET>30&&(trigger.HLT_PFHT650_v5==1||trigger.HLT_PFHT650_v6==1||trigger.HLT_PFHT650_v7==1||trigger.HLT_PFHT650_v8==1||trigger.HLT_PFHT650_v9==1||trigger.HLT_PFNoPUHT650_v1==1||trigger.HLT_PFNoPUHT650_v3==1||trigger.HLT_PFNoPUHT650_v4==1)))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0&&TOBTECTagger<=8","goff");
c->Draw("jet[3].lv.Eta()>>Jet4EtaallHT","NJetsIDLoose40>3&&((misc.MT2>150&&misc.HT>=750&&misc.MET>30&&(trigger.HLT_PFHT650_v5==1||trigger.HLT_PFHT650_v6==1||trigger.HLT_PFHT650_v7==1||trigger.HLT_PFHT650_v8==1||trigger.HLT_PFHT650_v9==1||trigger.HLT_PFNoPUHT650_v1==1||trigger.HLT_PFNoPUHT650_v3==1||trigger.HLT_PFNoPUHT650_v4==1)))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0","goff");
c->Draw("jet[3].lv.Eta()>>Jet4EtapassHT","NJetsIDLoose40>3&&((misc.MT2>150&&misc.HT>=750&&misc.MET>30&&(trigger.HLT_PFHT650_v5==1||trigger.HLT_PFHT650_v6==1||trigger.HLT_PFHT650_v7==1||trigger.HLT_PFHT650_v8==1||trigger.HLT_PFHT650_v9==1||trigger.HLT_PFNoPUHT650_v1==1||trigger.HLT_PFNoPUHT650_v3==1||trigger.HLT_PFNoPUHT650_v4==1)))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0&&TOBTECTagger<=8","goff");
c->Draw("jet[3].lv.Eta()>>Jet4EtaallMET","NJetsIDLoose40>3&&((misc.MT2>200&&misc.HT>=450&&misc.HT<750&&misc.MET>200&&((trigger.HLT_PFMET150_v2==1||trigger.HLT_PFMET150_v3==1||trigger.HLT_PFMET150_v4==1||trigger.HLT_PFMET150_v5==1||trigger.HLT_PFMET150_v6==1||trigger.HLT_PFMET150_v7==1)||(trigger.HLT_PFHT350_PFMET100_v3==1||trigger.HLT_PFHT350_PFMET100_v4==1||trigger.HLT_PFHT350_PFMET100_v5==1||trigger.HLT_PFHT350_PFMET100_v6==1||trigger.HLT_PFHT350_PFMET100_v7==1||trigger.HLT_PFNoPUHT350_PFMET100_v1==1||trigger.HLT_PFNoPUHT350_PFMET100_v3==1||trigger.HLT_PFNoPUHT350_PFMET100_v4==1))))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0","goff");
c->Draw("jet[3].lv.Eta()>>Jet4EtapassMET","NJetsIDLoose40>3&&((misc.MT2>200&&misc.HT>=450&&misc.HT<750&&misc.MET>200&&((trigger.HLT_PFMET150_v2==1||trigger.HLT_PFMET150_v3==1||trigger.HLT_PFMET150_v4==1||trigger.HLT_PFMET150_v5==1||trigger.HLT_PFMET150_v6==1||trigger.HLT_PFMET150_v7==1)||(trigger.HLT_PFHT350_PFMET100_v3==1||trigger.HLT_PFHT350_PFMET100_v4==1||trigger.HLT_PFHT350_PFMET100_v5==1||trigger.HLT_PFHT350_PFMET100_v6==1||trigger.HLT_PFHT350_PFMET100_v7==1||trigger.HLT_PFNoPUHT350_PFMET100_v1==1||trigger.HLT_PFNoPUHT350_PFMET100_v3==1||trigger.HLT_PFNoPUHT350_PFMET100_v4==1))))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0&&TOBTECTagger<=8","goff");
Jet4Etaall->GetXaxis()->SetTitle("jet 2 #eta"); Jet4Etaall->GetYaxis()->SetTitle("all events / 1");
Jet4EtaallHT->GetXaxis()->SetTitle("jet 2 #eta"); Jet4EtaallHT->GetYaxis()->SetTitle("all events / 1");
Jet4EtaallMET->GetXaxis()->SetTitle("jet 2 #eta"); Jet4EtaallMET->GetYaxis()->SetTitle("all events / 1");
Jet4Etapass->GetXaxis()->SetTitle("jet 2 #eta"); Jet4Etapass->GetYaxis()->SetTitle("passing events / 1");
Jet4EtapassHT->GetXaxis()->SetTitle("jet 2 #eta"); Jet4EtapassHT->GetYaxis()->SetTitle("passing events / 1");
Jet4EtapassMET->GetXaxis()->SetTitle("jet 2 #eta"); Jet4EtapassMET->GetYaxis()->SetTitle("passing events / 1");
TH1D *Jet4Etaalleff = (TH1D*)Jet4Etaall->Clone("Jet4Etaalleff");
TH1D *Jet4Etapasseff = (TH1D*)Jet4Etapass->Clone("Jet4Etapasseff");
TH1D *Jet4EtaallHTeff = (TH1D*)Jet4EtaallHT->Clone("Jet4EtaallHTeff");
TH1D *Jet4EtapassHTeff = (TH1D*)Jet4EtapassHT->Clone("Jet4EtapassHTeff");
TH1D *Jet4EtaallMETeff = (TH1D*)Jet4EtaallMET->Clone("Jet4EtaallMETeff");
TH1D *Jet4EtapassMETeff = (TH1D*)Jet4EtapassMET->Clone("Jet4EtapassMETeff");
TEfficiency *Jet4Etaeff = new TEfficiency((*Jet4Etapasseff),(*Jet4Etaalleff));
Jet4Etaeff->SetName("Jet4Etaeff");
TEfficiency *Jet4EtaeffHT = new TEfficiency((*Jet4EtapassHTeff),(*Jet4EtaallHTeff));
Jet4EtaeffHT->SetName("Jet4EtaeffHT");
TEfficiency *Jet4EtaeffMET = new TEfficiency((*Jet4EtapassMETeff),(*Jet4EtaallMETeff));
Jet4EtaeffMET->SetName("Jet4EtaeffMET");
cout << "Filled efficiency vs. j4 eta" << endl;


const int netabin = 12;
double etabin[netabin+1];
for(int n = 0; n<=netabin;++n) etabin[n] = (double)n*0.2;
const int nptbin = 14;
double ptbin[nptbin+1] = {20,30,40,50,75,100,125,150,175,200,250,300,400,500,1000};
TH2D *JetPtEtaall = new TH2D("JetPtEtaall","",nptbin, ptbin,netabin,etabin);
TH2D *JetPtEtaallHT = new TH2D("JetPtEtaallHT","",nptbin, ptbin,netabin,etabin);
TH2D *JetPtEtaallMET = new TH2D("JetPtEtaallMET","",nptbin, ptbin,netabin,etabin);
TH2D *JetPtEtapass = new TH2D("JetPtEtapass","",nptbin, ptbin,netabin,etabin);
TH2D *JetPtEtapassHT = new TH2D("JetPtEtapassHT","",nptbin, ptbin,netabin,etabin);
TH2D *JetPtEtapassMET = new TH2D("JetPtEtapassMET","",nptbin, ptbin,netabin,etabin);
gROOT->SetStyle("Plain");
gStyle->SetPalette(1);
gStyle->SetOptStat(0);
gROOT->cd();
c->Draw("abs(jet.lv.Eta()):jet.lv.Pt()>>JetPtEtaall","jet.isPFIDLoose&&jet.lv.Pt()>=20&&abs(jet.lv.Eta())<=2.4&&((misc.MT2>200&&misc.HT>=450&&misc.HT<750&&misc.MET>200&&((trigger.HLT_PFMET150_v2==1||trigger.HLT_PFMET150_v3==1||trigger.HLT_PFMET150_v4==1||trigger.HLT_PFMET150_v5==1||trigger.HLT_PFMET150_v6==1||trigger.HLT_PFMET150_v7==1)||(trigger.HLT_PFHT350_PFMET100_v3==1||trigger.HLT_PFHT350_PFMET100_v4==1||trigger.HLT_PFHT350_PFMET100_v5==1||trigger.HLT_PFHT350_PFMET100_v6==1||trigger.HLT_PFHT350_PFMET100_v7==1||trigger.HLT_PFNoPUHT350_PFMET100_v1==1||trigger.HLT_PFNoPUHT350_PFMET100_v3==1||trigger.HLT_PFNoPUHT350_PFMET100_v4==1)))||(misc.MT2>150&misc.HT>=750&&misc.MET>30&&(trigger.HLT_PFHT650_v5==1||trigger.HLT_PFHT650_v6==1||trigger.HLT_PFHT650_v7==1||trigger.HLT_PFHT650_v8==1||trigger.HLT_PFHT650_v9==1||trigger.HLT_PFNoPUHT650_v1==1||trigger.HLT_PFNoPUHT650_v3==1||trigger.HLT_PFNoPUHT650_v4==1)))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0","goff");
c->Draw("abs(jet.lv.Eta()):jet.lv.Pt()>>JetPtEtapass","jet.isPFIDLoose&&jet.lv.Pt()>=20&&abs(jet.lv.Eta())<=2.4&&((misc.MT2>200&&misc.HT>=450&&misc.HT<750&&misc.MET>200&&((trigger.HLT_PFMET150_v2==1||trigger.HLT_PFMET150_v3==1||trigger.HLT_PFMET150_v4==1||trigger.HLT_PFMET150_v5==1||trigger.HLT_PFMET150_v6==1||trigger.HLT_PFMET150_v7==1)||(trigger.HLT_PFHT350_PFMET100_v3==1||trigger.HLT_PFHT350_PFMET100_v4==1||trigger.HLT_PFHT350_PFMET100_v5==1||trigger.HLT_PFHT350_PFMET100_v6==1||trigger.HLT_PFHT350_PFMET100_v7==1||trigger.HLT_PFNoPUHT350_PFMET100_v1==1||trigger.HLT_PFNoPUHT350_PFMET100_v3==1||trigger.HLT_PFNoPUHT350_PFMET100_v4==1)))||(misc.MT2>150&misc.HT>=750&&misc.MET>30&&(trigger.HLT_PFHT650_v5==1||trigger.HLT_PFHT650_v6==1||trigger.HLT_PFHT650_v7==1||trigger.HLT_PFHT650_v8==1||trigger.HLT_PFHT650_v9==1||trigger.HLT_PFNoPUHT650_v1==1||trigger.HLT_PFNoPUHT650_v3==1||trigger.HLT_PFNoPUHT650_v4==1)))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0&&TOBTECTagger<=8","goff");
c->Draw("abs(jet.lv.Eta()):jet.lv.Pt()>>JetPtEtaallHT","jet.isPFIDLoose&&jet.lv.Pt()>=20&&abs(jet.lv.Eta())<=2.4&&((misc.MT2>150&&misc.HT>=750&&misc.MET>30&&(trigger.HLT_PFHT650_v5==1||trigger.HLT_PFHT650_v6==1||trigger.HLT_PFHT650_v7==1||trigger.HLT_PFHT650_v8==1||trigger.HLT_PFHT650_v9==1||trigger.HLT_PFNoPUHT650_v1==1||trigger.HLT_PFNoPUHT650_v3==1||trigger.HLT_PFNoPUHT650_v4==1)))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0","goff");
c->Draw("abs(jet.lv.Eta()):jet.lv.Pt()>>JetPtEtapassHT","jet.isPFIDLoose&&jet.lv.Pt()>=20&&abs(jet.lv.Eta())<=2.4&&((misc.MT2>150&&misc.HT>=750&&misc.MET>30&&(trigger.HLT_PFHT650_v5==1||trigger.HLT_PFHT650_v6==1||trigger.HLT_PFHT650_v7==1||trigger.HLT_PFHT650_v8==1||trigger.HLT_PFHT650_v9==1||trigger.HLT_PFNoPUHT650_v1==1||trigger.HLT_PFNoPUHT650_v3==1||trigger.HLT_PFNoPUHT650_v4==1)))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0&&TOBTECTagger<=8","goff");
c->Draw("abs(jet.lv.Eta()):jet.lv.Pt()>>JetPtEtaallMET","jet.isPFIDLoose&&jet.lv.Pt()>=20&&abs(jet.lv.Eta())<=2.4&&((misc.MT2>200&&misc.HT>=450&&misc.HT<750&&misc.MET>200&&((trigger.HLT_PFMET150_v2==1||trigger.HLT_PFMET150_v3==1||trigger.HLT_PFMET150_v4==1||trigger.HLT_PFMET150_v5==1||trigger.HLT_PFMET150_v6==1||trigger.HLT_PFMET150_v7==1)||(trigger.HLT_PFHT350_PFMET100_v3==1||trigger.HLT_PFHT350_PFMET100_v4==1||trigger.HLT_PFHT350_PFMET100_v5==1||trigger.HLT_PFHT350_PFMET100_v6==1||trigger.HLT_PFHT350_PFMET100_v7==1||trigger.HLT_PFNoPUHT350_PFMET100_v1==1||trigger.HLT_PFNoPUHT350_PFMET100_v3==1||trigger.HLT_PFNoPUHT350_PFMET100_v4==1))))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0","goff");
c->Draw("abs(jet.lv.Eta()):jet.lv.Pt()>>JetPtEtapassMET","jet.isPFIDLoose&&jet.lv.Pt()>=20&&abs(jet.lv.Eta())<=2.4&&((misc.MT2>200&&misc.HT>=450&&misc.HT<750&&misc.MET>200&&((trigger.HLT_PFMET150_v2==1||trigger.HLT_PFMET150_v3==1||trigger.HLT_PFMET150_v4==1||trigger.HLT_PFMET150_v5==1||trigger.HLT_PFMET150_v6==1||trigger.HLT_PFMET150_v7==1)||(trigger.HLT_PFHT350_PFMET100_v3==1||trigger.HLT_PFHT350_PFMET100_v4==1||trigger.HLT_PFHT350_PFMET100_v5==1||trigger.HLT_PFHT350_PFMET100_v6==1||trigger.HLT_PFHT350_PFMET100_v7==1||trigger.HLT_PFNoPUHT350_PFMET100_v1==1||trigger.HLT_PFNoPUHT350_PFMET100_v3==1||trigger.HLT_PFNoPUHT350_PFMET100_v4==1))))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0&&TOBTECTagger<=8","goff");
JetPtEtaall->GetXaxis()->SetTitle("jet P_{T}"); JetPtEtaall->GetYaxis()->SetTitle("jet #eta"); JetPtEtaall->GetZaxis()->SetTitle("all events");
JetPtEtaallHT->GetXaxis()->SetTitle("jet P_{T}"); JetPtEtaallHT->GetYaxis()->SetTitle("jet #eta"); JetPtEtaallHT->GetZaxis()->SetTitle("all events");
JetPtEtaallMET->GetXaxis()->SetTitle("jet P_{T}"); JetPtEtaallMET->GetYaxis()->SetTitle("jet #eta"); JetPtEtaallMET->GetZaxis()->SetTitle("all events");
JetPtEtapass->GetXaxis()->SetTitle("jet P_{T}"); JetPtEtapass->GetYaxis()->SetTitle("jet #eta"); JetPtEtapass->GetZaxis()->SetTitle("passing events");
JetPtEtapassHT->GetXaxis()->SetTitle("jet P_{T}"); JetPtEtapassHT->GetYaxis()->SetTitle("jet #eta"); JetPtEtapassHT->GetZaxis()->SetTitle("passing events");
JetPtEtapassMET->GetXaxis()->SetTitle("jet P_{T}"); JetPtEtapassMET->GetYaxis()->SetTitle("jet #eta"); JetPtEtapassMET->GetZaxis()->SetTitle("passing events");
TH2D *JetPtEtaalleff = (TH2D*)JetPtEtaall->Clone("JetPtEtaalleff");
TH2D *JetPtEtapasseff = (TH2D*)JetPtEtapass->Clone("JetPtEtapasseff");
TH2D *JetPtEtaallHTeff = (TH2D*)JetPtEtaallHT->Clone("JetPtEtaallHTeff");
TH2D *JetPtEtapassHTeff = (TH2D*)JetPtEtapassHT->Clone("JetPtEtapassHTeff");
TH2D *JetPtEtaallMETeff = (TH2D*)JetPtEtaallMET->Clone("JetPtEtaallMETeff");
TH2D *JetPtEtapassMETeff = (TH2D*)JetPtEtapassMET->Clone("JetPtEtapassMETeff");
TEfficiency *JetPtEtaeff = new TEfficiency((*JetPtEtapasseff),(*JetPtEtaalleff));
JetPtEtaeff->SetName("JetPtEtaeff");
TEfficiency *JetPtEtaeffHT = new TEfficiency((*JetPtEtapassHTeff),(*JetPtEtaallHTeff));
JetPtEtaeffHT->SetName("JetPtEtaeffHT");
TEfficiency *JetPtEtaeffMET = new TEfficiency((*JetPtEtapassMETeff),(*JetPtEtaallMETeff));
JetPtEtaeffMET->SetName("JetPtEtaeffMET");
cout << "Filled efficiency vs. jet pt/eta" << endl;

TH1D *JetEtaall = new TH1D("JetEtaall","",netabin,etabin);
TH1D *JetEtaallHT = new TH1D("JetEtaallHT","",netabin,etabin);
TH1D *JetEtaallMET = new TH1D("JetEtaallMET","",netabin,etabin);
TH1D *JetEtapass = new TH1D("JetEtapass","",netabin,etabin);
TH1D *JetEtapassHT = new TH1D("JetEtapassHT","",netabin,etabin);
TH1D *JetEtapassMET = new TH1D("JetEtapassMET","",netabin,etabin);
gROOT->SetStyle("Plain");
gStyle->SetPalette(1);
gStyle->SetOptStat(0);
gROOT->cd();
c->Draw("abs(jet.lv.Eta())>>JetEtaall","jet.isPFIDLoose&&jet.lv.Pt()>=20&&abs(jet.lv.Eta())<=2.4&&((misc.MT2>200&&misc.HT>=450&&misc.HT<750&&misc.MET>200&&((trigger.HLT_PFMET150_v2==1||trigger.HLT_PFMET150_v3==1||trigger.HLT_PFMET150_v4==1||trigger.HLT_PFMET150_v5==1||trigger.HLT_PFMET150_v6==1||trigger.HLT_PFMET150_v7==1)||(trigger.HLT_PFHT350_PFMET100_v3==1||trigger.HLT_PFHT350_PFMET100_v4==1||trigger.HLT_PFHT350_PFMET100_v5==1||trigger.HLT_PFHT350_PFMET100_v6==1||trigger.HLT_PFHT350_PFMET100_v7==1||trigger.HLT_PFNoPUHT350_PFMET100_v1==1||trigger.HLT_PFNoPUHT350_PFMET100_v3==1||trigger.HLT_PFNoPUHT350_PFMET100_v4==1)))||(misc.MT2>150&misc.HT>=750&&misc.MET>30&&(trigger.HLT_PFHT650_v5==1||trigger.HLT_PFHT650_v6==1||trigger.HLT_PFHT650_v7==1||trigger.HLT_PFHT650_v8==1||trigger.HLT_PFHT650_v9==1||trigger.HLT_PFNoPUHT650_v1==1||trigger.HLT_PFNoPUHT650_v3==1||trigger.HLT_PFNoPUHT650_v4==1)))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0","goff");
c->Draw("abs(jet.lv.Eta())>>JetEtapass","jet.isPFIDLoose&&jet.lv.Pt()>=20&&abs(jet.lv.Eta())<=2.4&&((misc.MT2>200&&misc.HT>=450&&misc.HT<750&&misc.MET>200&&((trigger.HLT_PFMET150_v2==1||trigger.HLT_PFMET150_v3==1||trigger.HLT_PFMET150_v4==1||trigger.HLT_PFMET150_v5==1||trigger.HLT_PFMET150_v6==1||trigger.HLT_PFMET150_v7==1)||(trigger.HLT_PFHT350_PFMET100_v3==1||trigger.HLT_PFHT350_PFMET100_v4==1||trigger.HLT_PFHT350_PFMET100_v5==1||trigger.HLT_PFHT350_PFMET100_v6==1||trigger.HLT_PFHT350_PFMET100_v7==1||trigger.HLT_PFNoPUHT350_PFMET100_v1==1||trigger.HLT_PFNoPUHT350_PFMET100_v3==1||trigger.HLT_PFNoPUHT350_PFMET100_v4==1)))||(misc.MT2>150&misc.HT>=750&&misc.MET>30&&(trigger.HLT_PFHT650_v5==1||trigger.HLT_PFHT650_v6==1||trigger.HLT_PFHT650_v7==1||trigger.HLT_PFHT650_v8==1||trigger.HLT_PFHT650_v9==1||trigger.HLT_PFNoPUHT650_v1==1||trigger.HLT_PFNoPUHT650_v3==1||trigger.HLT_PFNoPUHT650_v4==1)))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0&&TOBTECTagger<=8","goff");
c->Draw("abs(jet.lv.Eta())>>JetEtaallHT","jet.isPFIDLoose&&jet.lv.Pt()>=20&&abs(jet.lv.Eta())<=2.4&&((misc.MT2>150&&misc.HT>=750&&misc.MET>30&&(trigger.HLT_PFHT650_v5==1||trigger.HLT_PFHT650_v6==1||trigger.HLT_PFHT650_v7==1||trigger.HLT_PFHT650_v8==1||trigger.HLT_PFHT650_v9==1||trigger.HLT_PFNoPUHT650_v1==1||trigger.HLT_PFNoPUHT650_v3==1||trigger.HLT_PFNoPUHT650_v4==1)))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0","goff");
c->Draw("abs(jet.lv.Eta())>>JetEtapassHT","jet.isPFIDLoose&&jet.lv.Pt()>=20&&abs(jet.lv.Eta())<=2.4&&((misc.MT2>150&&misc.HT>=750&&misc.MET>30&&(trigger.HLT_PFHT650_v5==1||trigger.HLT_PFHT650_v6==1||trigger.HLT_PFHT650_v7==1||trigger.HLT_PFHT650_v8==1||trigger.HLT_PFHT650_v9==1||trigger.HLT_PFNoPUHT650_v1==1||trigger.HLT_PFNoPUHT650_v3==1||trigger.HLT_PFNoPUHT650_v4==1)))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0&&TOBTECTagger<=8","goff");
c->Draw("abs(jet.lv.Eta())>>JetEtaallMET","jet.isPFIDLoose&&jet.lv.Pt()>=20&&abs(jet.lv.Eta())<=2.4&&((misc.MT2>200&&misc.HT>=450&&misc.HT<750&&misc.MET>200&&((trigger.HLT_PFMET150_v2==1||trigger.HLT_PFMET150_v3==1||trigger.HLT_PFMET150_v4==1||trigger.HLT_PFMET150_v5==1||trigger.HLT_PFMET150_v6==1||trigger.HLT_PFMET150_v7==1)||(trigger.HLT_PFHT350_PFMET100_v3==1||trigger.HLT_PFHT350_PFMET100_v4==1||trigger.HLT_PFHT350_PFMET100_v5==1||trigger.HLT_PFHT350_PFMET100_v6==1||trigger.HLT_PFHT350_PFMET100_v7==1||trigger.HLT_PFNoPUHT350_PFMET100_v1==1||trigger.HLT_PFNoPUHT350_PFMET100_v3==1||trigger.HLT_PFNoPUHT350_PFMET100_v4==1))))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0","goff");
c->Draw("abs(jet.lv.Eta())>>JetEtapassMET","jet.isPFIDLoose&&jet.lv.Pt()>=20&&abs(jet.lv.Eta())<=2.4&&((misc.MT2>200&&misc.HT>=450&&misc.HT<750&&misc.MET>200&&((trigger.HLT_PFMET150_v2==1||trigger.HLT_PFMET150_v3==1||trigger.HLT_PFMET150_v4==1||trigger.HLT_PFMET150_v5==1||trigger.HLT_PFMET150_v6==1||trigger.HLT_PFMET150_v7==1)||(trigger.HLT_PFHT350_PFMET100_v3==1||trigger.HLT_PFHT350_PFMET100_v4==1||trigger.HLT_PFHT350_PFMET100_v5==1||trigger.HLT_PFHT350_PFMET100_v6==1||trigger.HLT_PFHT350_PFMET100_v7==1||trigger.HLT_PFNoPUHT350_PFMET100_v1==1||trigger.HLT_PFNoPUHT350_PFMET100_v3==1||trigger.HLT_PFNoPUHT350_PFMET100_v4==1))))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0&&TOBTECTagger<=8","goff");
JetEtaall->GetXaxis()->SetTitle("jet #eta");    JetEtaall->GetYaxis()->SetTitle("all events");
JetEtaallHT->GetXaxis()->SetTitle("jet #eta");  JetEtaallHT->GetYaxis()->SetTitle("all events");
JetEtaallMET->GetXaxis()->SetTitle("jet #eta"); JetEtaallMET->GetYaxis()->SetTitle("all events");
JetEtapass->GetXaxis()->SetTitle("jet #eta");   JetEtapass->GetYaxis()->SetTitle("passing events");
JetEtapassHT->GetXaxis()->SetTitle("jet #eta"); JetEtapassHT->GetYaxis()->SetTitle("passing events");
JetEtapassMET->GetXaxis()->SetTitle("jet #eta");JetEtapassMET->GetYaxis()->SetTitle("passing events");
TH1D *JetEtaalleff = (TH1D*)JetEtaall->Clone("JetEtaalleff");
TH1D *JetEtapasseff = (TH1D*)JetEtapass->Clone("JetEtapasseff");
TH1D *JetEtaallHTeff = (TH1D*)JetEtaallHT->Clone("JetEtaallHTeff");
TH1D *JetEtapassHTeff = (TH1D*)JetEtapassHT->Clone("JetEtapassHTeff");
TH1D *JetEtaallMETeff = (TH1D*)JetEtaallMET->Clone("JetEtaallMETeff");
TH1D *JetEtapassMETeff = (TH1D*)JetEtapassMET->Clone("JetEtapassMETeff");
TEfficiency *JetEtaeff = new TEfficiency((*JetEtapasseff),(*JetEtaalleff));
JetEtaeff->SetName("JetEtaeff");
TEfficiency *JetEtaeffHT = new TEfficiency((*JetEtapassHTeff),(*JetEtaallHTeff));
JetEtaeffHT->SetName("JetEtaeffHT");
TEfficiency *JetEtaeffMET = new TEfficiency((*JetEtapassMETeff),(*JetEtaallMETeff));
JetEtaeffMET->SetName("JetEtaeffMET");
cout << "Filled efficiency vs. jet eta" << endl;

TH1D *JetPtall = new TH1D("JetPtall","",nptbin, ptbin);
TH1D *JetPtallHT = new TH1D("JetPtallHT","",nptbin, ptbin);
TH1D *JetPtallMET = new TH1D("JetPtallMET","",nptbin, ptbin);
TH1D *JetPtpass = new TH1D("JetPtpass","",nptbin, ptbin);
TH1D *JetPtpassHT = new TH1D("JetPtpassHT","",nptbin, ptbin);
TH1D *JetPtpassMET = new TH1D("JetPtpassMET","",nptbin, ptbin);
gROOT->SetStyle("Plain");
gStyle->SetPalette(1);
gStyle->SetOptStat(0);
gROOT->cd();
c->Draw("jet.lv.Pt()>>JetPtall","jet.isPFIDLoose&&jet.lv.Pt()>=20&&abs(jet.lv.Eta())<=2.4&&((misc.MT2>200&&misc.HT>=450&&misc.HT<750&&misc.MET>200&&((trigger.HLT_PFMET150_v2==1||trigger.HLT_PFMET150_v3==1||trigger.HLT_PFMET150_v4==1||trigger.HLT_PFMET150_v5==1||trigger.HLT_PFMET150_v6==1||trigger.HLT_PFMET150_v7==1)||(trigger.HLT_PFHT350_PFMET100_v3==1||trigger.HLT_PFHT350_PFMET100_v4==1||trigger.HLT_PFHT350_PFMET100_v5==1||trigger.HLT_PFHT350_PFMET100_v6==1||trigger.HLT_PFHT350_PFMET100_v7==1||trigger.HLT_PFNoPUHT350_PFMET100_v1==1||trigger.HLT_PFNoPUHT350_PFMET100_v3==1||trigger.HLT_PFNoPUHT350_PFMET100_v4==1)))||(misc.MT2>150&misc.HT>=750&&misc.MET>30&&(trigger.HLT_PFHT650_v5==1||trigger.HLT_PFHT650_v6==1||trigger.HLT_PFHT650_v7==1||trigger.HLT_PFHT650_v8==1||trigger.HLT_PFHT650_v9==1||trigger.HLT_PFNoPUHT650_v1==1||trigger.HLT_PFNoPUHT650_v3==1||trigger.HLT_PFNoPUHT650_v4==1)))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0","goff");
c->Draw("jet.lv.Pt()>>JetPtpass","jet.isPFIDLoose&&jet.lv.Pt()>=20&&abs(jet.lv.Eta())<=2.4&&((misc.MT2>200&&misc.HT>=450&&misc.HT<750&&misc.MET>200&&((trigger.HLT_PFMET150_v2==1||trigger.HLT_PFMET150_v3==1||trigger.HLT_PFMET150_v4==1||trigger.HLT_PFMET150_v5==1||trigger.HLT_PFMET150_v6==1||trigger.HLT_PFMET150_v7==1)||(trigger.HLT_PFHT350_PFMET100_v3==1||trigger.HLT_PFHT350_PFMET100_v4==1||trigger.HLT_PFHT350_PFMET100_v5==1||trigger.HLT_PFHT350_PFMET100_v6==1||trigger.HLT_PFHT350_PFMET100_v7==1||trigger.HLT_PFNoPUHT350_PFMET100_v1==1||trigger.HLT_PFNoPUHT350_PFMET100_v3==1||trigger.HLT_PFNoPUHT350_PFMET100_v4==1)))||(misc.MT2>150&misc.HT>=750&&misc.MET>30&&(trigger.HLT_PFHT650_v5==1||trigger.HLT_PFHT650_v6==1||trigger.HLT_PFHT650_v7==1||trigger.HLT_PFHT650_v8==1||trigger.HLT_PFHT650_v9==1||trigger.HLT_PFNoPUHT650_v1==1||trigger.HLT_PFNoPUHT650_v3==1||trigger.HLT_PFNoPUHT650_v4==1)))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0&&TOBTECTagger<=8","goff");
c->Draw("jet.lv.Pt()>>JetPtallHT","jet.isPFIDLoose&&jet.lv.Pt()>=20&&abs(jet.lv.Eta())<=2.4&&((misc.MT2>150&&misc.HT>=750&&misc.MET>30&&(trigger.HLT_PFHT650_v5==1||trigger.HLT_PFHT650_v6==1||trigger.HLT_PFHT650_v7==1||trigger.HLT_PFHT650_v8==1||trigger.HLT_PFHT650_v9==1||trigger.HLT_PFNoPUHT650_v1==1||trigger.HLT_PFNoPUHT650_v3==1||trigger.HLT_PFNoPUHT650_v4==1)))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0","goff");
c->Draw("jet.lv.Pt()>>JetPtpassHT","jet.isPFIDLoose&&jet.lv.Pt()>=20&&abs(jet.lv.Eta())<=2.4&&((misc.MT2>150&&misc.HT>=750&&misc.MET>30&&(trigger.HLT_PFHT650_v5==1||trigger.HLT_PFHT650_v6==1||trigger.HLT_PFHT650_v7==1||trigger.HLT_PFHT650_v8==1||trigger.HLT_PFHT650_v9==1||trigger.HLT_PFNoPUHT650_v1==1||trigger.HLT_PFNoPUHT650_v3==1||trigger.HLT_PFNoPUHT650_v4==1)))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0&&TOBTECTagger<=8","goff");
c->Draw("jet.lv.Pt()>>JetPtallMET","jet.isPFIDLoose&&jet.lv.Pt()>=20&&abs(jet.lv.Eta())<=2.4&&((misc.MT2>200&&misc.HT>=450&&misc.HT<750&&misc.MET>200&&((trigger.HLT_PFMET150_v2==1||trigger.HLT_PFMET150_v3==1||trigger.HLT_PFMET150_v4==1||trigger.HLT_PFMET150_v5==1||trigger.HLT_PFMET150_v6==1||trigger.HLT_PFMET150_v7==1)||(trigger.HLT_PFHT350_PFMET100_v3==1||trigger.HLT_PFHT350_PFMET100_v4==1||trigger.HLT_PFHT350_PFMET100_v5==1||trigger.HLT_PFHT350_PFMET100_v6==1||trigger.HLT_PFHT350_PFMET100_v7==1||trigger.HLT_PFNoPUHT350_PFMET100_v1==1||trigger.HLT_PFNoPUHT350_PFMET100_v3==1||trigger.HLT_PFNoPUHT350_PFMET100_v4==1))))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0","goff");
c->Draw("jet.lv.Pt()>>JetPtpassMET","jet.isPFIDLoose&&jet.lv.Pt()>=20&&abs(jet.lv.Eta())<=2.4&&((misc.MT2>200&&misc.HT>=450&&misc.HT<750&&misc.MET>200&&((trigger.HLT_PFMET150_v2==1||trigger.HLT_PFMET150_v3==1||trigger.HLT_PFMET150_v4==1||trigger.HLT_PFMET150_v5==1||trigger.HLT_PFMET150_v6==1||trigger.HLT_PFMET150_v7==1)||(trigger.HLT_PFHT350_PFMET100_v3==1||trigger.HLT_PFHT350_PFMET100_v4==1||trigger.HLT_PFHT350_PFMET100_v5==1||trigger.HLT_PFHT350_PFMET100_v6==1||trigger.HLT_PFHT350_PFMET100_v7==1||trigger.HLT_PFNoPUHT350_PFMET100_v1==1||trigger.HLT_PFNoPUHT350_PFMET100_v3==1||trigger.HLT_PFNoPUHT350_PFMET100_v4==1))))&&NMuons==0 && NEles==0 && NTausIDLoose3Hits==0&&misc.Jet0Pass ==1&&misc.Jet1Pass ==1&&misc.SecondJPt  > 100&&misc.PassJet40ID ==1&&misc.MinMetJetDPhi4Pt40 >0.3&&misc.Vectorsumpt < 70&&misc.HBHENoiseFlag == 0&&misc.CSCTightHaloIDFlag == 0&&misc.trackingFailureFlag==0&&misc.eeBadScFlag==0&&misc.EcalDeadCellTriggerPrimitiveFlag==0&&misc.TrackingManyStripClusFlag==0&&misc.TrackingTooManyStripClusFlag==0&&misc.TrackingLogErrorTooManyClustersFlag==0&&misc.CrazyHCAL==0&&misc.MET/misc.CaloMETRaw<=2.&&ExtraBeamHaloFilter==0&&TOBTECTagger>=0&&TOBTECTagger<=8","goff");
JetPtall->GetXaxis()->SetTitle("jet P_{T}");     JetPtall->GetYaxis()->SetTitle("all events");
JetPtallHT->GetXaxis()->SetTitle("jet P_{T}");   JetPtallHT->GetYaxis()->SetTitle("all events");
JetPtallMET->GetXaxis()->SetTitle("jet P_{T}");  JetPtallMET->GetYaxis()->SetTitle("all events");
JetPtpass->GetXaxis()->SetTitle("jet P_{T}");    JetPtpass->GetYaxis()->SetTitle("passing events");
JetPtpassHT->GetXaxis()->SetTitle("jet P_{T}");  JetPtpassHT->GetYaxis()->SetTitle("passing events");
JetPtpassMET->GetXaxis()->SetTitle("jet P_{T}"); JetPtpassMET->GetYaxis()->SetTitle("passing events");
TH1D *JetPtalleff = (TH1D*)JetPtall->Clone("JetPtalleff");
TH1D *JetPtpasseff = (TH1D*)JetPtpass->Clone("JetPtpasseff");
TH1D *JetPtallHTeff = (TH1D*)JetPtallHT->Clone("JetPtallHTeff");
TH1D *JetPtpassHTeff = (TH1D*)JetPtpassHT->Clone("JetPtpassHTeff");
TH1D *JetPtallMETeff = (TH1D*)JetPtallMET->Clone("JetPtallMETeff");
TH1D *JetPtpassMETeff = (TH1D*)JetPtpassMET->Clone("JetPtpassMETeff");
TEfficiency *JetPteff = new TEfficiency((*JetPtpasseff),(*JetPtalleff));
JetPteff->SetName("JetPteff");
TEfficiency *JetPteffHT = new TEfficiency((*JetPtpassHTeff),(*JetPtallHTeff));
JetPteffHT->SetName("JetPteffHT");
TEfficiency *JetPteffMET = new TEfficiency((*JetPtpassMETeff),(*JetPtallMETeff));
JetPteffMET->SetName("JetPteffMET");
cout << "Filled efficiency vs. jet pt" << endl;



TFile *newfile = new TFile("~/TOBTECfiles/PassingEventsStudy.root","RECREATE");
newfile ->cd();
MT2all     ->Write();
MT2allHT   ->Write();
MT2allMET  ->Write();
MT2pass    ->Write();
MT2passHT  ->Write();
MT2passMET ->Write();
MT2eff     ->Write();
MT2effHT   ->Write();
MT2effMET  ->Write();
MT2fit     ->Write();
MT2fitHT   ->Write();
MT2fitMET  ->Write();
HTall     ->Write();
HTallHT   ->Write();
HTallMET  ->Write();
HTpass    ->Write();
HTpassHT  ->Write();
HTpassMET ->Write();
HTeff     ->Write();
HTeffHT   ->Write();
HTeffMET  ->Write();
HTfit1    ->Write();
HTfit2    ->Write();
HTfitHT   ->Write();
HTfitMET  ->Write();
METall     ->Write();
METallHT   ->Write();
METallMET  ->Write();
METpass    ->Write();
METpassHT  ->Write();
METpassMET ->Write();
METeff     ->Write();
METeffHT   ->Write();
METeffMET  ->Write();
METfit     ->Write();
METfitHT   ->Write();
METfitMET  ->Write();
NJetsall     ->Write();
NJetsallHT   ->Write();
NJetsallMET  ->Write();
NJetspass    ->Write();
NJetspassHT  ->Write();
NJetspassMET ->Write();
NJetseff     ->Write();
NJetseffHT   ->Write();
NJetseffMET  ->Write();
NJetsfit     ->Write();
NJetsfitHT   ->Write();
NJetsfitMET  ->Write();
Jet1Etaall     ->Write();
Jet1EtaallHT   ->Write();
Jet1EtaallMET  ->Write();
Jet1Etapass    ->Write();
Jet1EtapassHT  ->Write();
Jet1EtapassMET ->Write();
Jet1Etaeff     ->Write();
Jet1EtaeffHT   ->Write();
Jet1EtaeffMET  ->Write();
Jet2Etaall     ->Write();
Jet2EtaallHT   ->Write();
Jet2EtaallMET  ->Write();
Jet2Etapass    ->Write();
Jet2EtapassHT  ->Write();
Jet2EtapassMET ->Write();
Jet2Etaeff     ->Write();
Jet2EtaeffHT   ->Write();
Jet2EtaeffMET  ->Write();
Jet3Etaall     ->Write();
Jet3EtaallHT   ->Write();
Jet3EtaallMET  ->Write();
Jet3Etapass    ->Write();
Jet3EtapassHT  ->Write();
Jet3EtapassMET ->Write();
Jet3Etaeff     ->Write();
Jet3EtaeffHT   ->Write();
Jet3EtaeffMET  ->Write();
Jet4Etaall     ->Write();
Jet4EtaallHT   ->Write();
Jet4EtaallMET  ->Write();
Jet4Etapass    ->Write();
Jet4EtapassHT  ->Write();
Jet4EtapassMET ->Write();
Jet4Etaeff     ->Write();
Jet4EtaeffHT   ->Write();
Jet4EtaeffMET  ->Write();
JetPtEtaall     ->Write();
JetPtEtaallHT   ->Write();
JetPtEtaallMET  ->Write();
JetPtEtapass    ->Write();
JetPtEtapassHT  ->Write();
JetPtEtapassMET ->Write();
JetPtEtaeff     ->Write();
JetPtEtaeffHT   ->Write();
JetPtEtaeffMET  ->Write();
JetEtaall     ->Write();
JetEtaallHT   ->Write();
JetEtaallMET  ->Write();
JetEtapass    ->Write();
JetEtapassHT  ->Write();
JetEtapassMET ->Write();
JetEtaeff     ->Write();
JetEtaeffHT   ->Write();
JetEtaeffMET  ->Write();
JetPtall     ->Write();
JetPtallHT   ->Write();
JetPtallMET  ->Write();
JetPtpass    ->Write();
JetPtpassHT  ->Write();
JetPtpassMET ->Write();
JetPteff     ->Write();
JetPteffHT   ->Write();
JetPteffMET  ->Write();
newfile ->Close();

}
